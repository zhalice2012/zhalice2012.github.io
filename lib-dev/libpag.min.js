!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).libpag={})}(this,(function(e){"use strict";const t=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")})();let r;void 0===t.globalThis&&Object.defineProperty(t,"globalThis",{get:()=>t});function n(e){const t=["length","name","prototype","wasmAsyncMethods"];let n=Object.getOwnPropertyNames(e).filter((e=>-1===t.indexOf(e)));e.wasmAsyncMethods&&e.wasmAsyncMethods.length>0&&(n=n.filter((t=>-1===e.wasmAsyncMethods.indexOf(t))));let i=Object.getOwnPropertyNames(e.prototype).filter((t=>"constructor"!==t&&"function"==typeof e.prototype[t]));e.prototype.wasmAsyncMethods&&e.prototype.wasmAsyncMethods.length>0&&(i=i.filter((t=>-1===e.prototype.wasmAsyncMethods.indexOf(t))));const a=(e,t)=>{const n=e[t];e[t]=function(...e){if(null!==r.Asyncify.currData){const t=r.Asyncify.currData;r.Asyncify.currData=null;const i=n.call(this,...e);return r.Asyncify.currData=t,i}return n.call(this,...e)}};n.forEach((t=>a(e,t))),i.forEach((t=>a(e.prototype,t)))}function i(e,t,r){e.wasmAsyncMethods||(e.wasmAsyncMethods=[]),e.wasmAsyncMethods.push(t)}function a(e){let t=Object.getOwnPropertyNames(e.prototype).filter((t=>"constructor"!==t&&"function"==typeof e.prototype[t]));const r=(t,r)=>{const n=t[r];t[r]=function(...t){if(!this.isDestroyed)return n.call(this,...t);console.error(`Don't call ${r} of the ${e.name} that is destroyed.`)}};t.forEach((t=>r(e.prototype,t)))}var o=(e=>(e[e.None=0]="None",e[e.Stretch=1]="Stretch",e[e.LetterBox=2]="LetterBox",e[e.Zoom=3]="Zoom",e))(o||{}),s=(e=>(e.onAnimationStart="onAnimationStart",e.onAnimationEnd="onAnimationEnd",e.onAnimationCancel="onAnimationCancel",e.onAnimationRepeat="onAnimationRepeat",e.onAnimationUpdate="onAnimationUpdate",e.onAnimationPlay="onAnimationPlay",e.onAnimationPause="onAnimationPause",e.onAnimationFlushed="onAnimationFlushed",e))(s||{}),l=(e=>(e[e.LeftJustify=0]="LeftJustify",e[e.CenterJustify=1]="CenterJustify",e[e.RightJustify=2]="RightJustify",e[e.FullJustifyLastLineLeft=3]="FullJustifyLastLineLeft",e[e.FullJustifyLastLineRight=4]="FullJustifyLastLineRight",e[e.FullJustifyLastLineCenter=5]="FullJustifyLastLineCenter",e[e.FullJustifyLastLineFull=6]="FullJustifyLastLineFull",e))(l||{}),c=(e=>(e[e.Default=0]="Default",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical",e))(c||{}),u=(e=>(e[e.Unknown=0]="Unknown",e[e.Null=1]="Null",e[e.Solid=2]="Solid",e[e.Text=3]="Text",e[e.Shape=4]="Shape",e[e.Image=5]="Image",e[e.PreCompose=6]="PreCompose",e))(u||{}),d=(e=>(e[e.None=0]="None",e[e.Scale=1]="Scale",e[e.Repeat=2]="Repeat",e[e.RepeatInverted=3]="RepeatInverted",e))(d||{}),f=(e=>(e[e.a=0]="a",e[e.c=1]="c",e[e.tx=2]="tx",e[e.b=3]="b",e[e.d=4]="d",e[e.ty=5]="ty",e))(f||{}),h=(e=>(e[e.Success=0]="Success",e[e.TryAgainLater=-1]="TryAgainLater",e[e.Error=-2]="Error",e))(h||{}),m=(e=>(e[e.Unknown=0]="Unknown",e[e.ALPHA_8=1]="ALPHA_8",e[e.RGBA_8888=2]="RGBA_8888",e[e.BGRA_8888=3]="BGRA_8888",e))(m||{}),p=(e=>(e[e.Unknown=0]="Unknown",e[e.Opaque=1]="Opaque",e[e.Premultiplied=2]="Premultiplied",e[e.Unpremultiplied=3]="Unpremultiplied",e))(p||{}),g=Object.freeze({__proto__:null,PAGScaleMode:o,PAGViewListenerEvent:s,ParagraphJustification:l,TextDirection:c,LayerType:u,PAGTimeStretchMode:d,MatrixIndex:f,DecoderResult:h,ColorType:m,AlphaType:p}),v=Object.defineProperty,y=Object.getOwnPropertyDescriptor;let w=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}static makeAll(e,t,n,i,a,o,s=0,l=0,c=1){const u=r._Matrix._MakeAll(e,t,n,i,a,o,s,l,c);if(!u)throw new Error("Matrix.makeAll fail, please check parameters valid!");return new w(u)}static makeScale(e,t){let n;if(n=void 0!==t?r._Matrix._MakeScale(e,t):r._Matrix._MakeScale(e),!n)throw new Error("Matrix.makeScale fail, please check parameters valid!");return new w(n)}static makeTrans(e,t){const n=r._Matrix._MakeTrans(e,t);if(!n)throw new Error("Matrix.makeTrans fail, please check parameters valid!");return new w(n)}get a(){return this.wasmIns?this.wasmIns._get(f.a):0}set a(e){var t;null==(t=this.wasmIns)||t._set(f.a,e)}get b(){return this.wasmIns?this.wasmIns._get(f.b):0}set b(e){var t;null==(t=this.wasmIns)||t._set(f.b,e)}get c(){return this.wasmIns?this.wasmIns._get(f.c):0}set c(e){var t;null==(t=this.wasmIns)||t._set(f.c,e)}get d(){return this.wasmIns?this.wasmIns._get(f.d):0}set d(e){var t;null==(t=this.wasmIns)||t._set(f.d,e)}get tx(){return this.wasmIns?this.wasmIns._get(f.tx):0}set tx(e){var t;null==(t=this.wasmIns)||t._set(f.tx,e)}get ty(){return this.wasmIns?this.wasmIns._get(f.ty):0}set ty(e){var t;null==(t=this.wasmIns)||t._set(f.ty,e)}get(e){return this.wasmIns?this.wasmIns._get(e):0}set(e,t){var r;null==(r=this.wasmIns)||r._set(e,t)}setAll(e,t,r,n,i,a){var o;null==(o=this.wasmIns)||o._setAll(e,t,r,n,i,a,0,0,1)}setAffine(e,t,r,n,i,a){var o;null==(o=this.wasmIns)||o._setAffine(e,t,r,n,i,a)}reset(){var e;null==(e=this.wasmIns)||e._reset()}setTranslate(e,t){var r;null==(r=this.wasmIns)||r._setTranslate(e,t)}setScale(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._setScale(e,t,r,n)}setRotate(e,t=0,r=0){var n;null==(n=this.wasmIns)||n._setRotate(e,t,r)}setSinCos(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._setSinCos(e,t,r,n)}setSkew(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._setSkew(e,t,r,n)}setConcat(e,t){var r;null==(r=this.wasmIns)||r._setConcat(e.wasmIns,t.wasmIns)}preTranslate(e,t){var r;null==(r=this.wasmIns)||r._preTranslate(e,t)}preScale(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._preScale(e,t,r,n)}preRotate(e,t=0,r=0){var n;null==(n=this.wasmIns)||n._preRotate(e,t,r)}preSkew(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._preSkew(e,t,r,n)}preConcat(e){var t;null==(t=this.wasmIns)||t._preConcat(e.wasmIns)}postTranslate(e,t){var r;null==(r=this.wasmIns)||r._postTranslate(e,t)}postScale(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._postScale(e,t,r,n)}postRotate(e,t=0,r=0){var n;null==(n=this.wasmIns)||n._postRotate(e,t,r)}postSkew(e,t,r=0,n=0){var i;null==(i=this.wasmIns)||i._postSkew(e,t,r,n)}postConcat(e){var t;null==(t=this.wasmIns)||t._postConcat(e.wasmIns)}destroy(){this.wasmIns.delete()}};w=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?y(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&v(t,r,a),a})([a,n],w);const _=(e,t,...n)=>{if(null!==r.Asyncify.currData){const i=r.Asyncify.currData;r.Asyncify.currData=null;const a=e.call(t,...n);return r.Asyncify.currData=i,a}return e.call(t,...n)},b=(e,t)=>new Proxy(e,{get(e,r,n){switch(r){case"get":return r=>{const n=_(e.get,e,r);return n?t(n):n};case"push_back":return t=>{_(e.push_back,e,t.wasmIns||t)};case"size":return()=>_(e.size,e);default:return Reflect.get(e,r,n)}}}),E=e=>{switch(_(e._layerType,e)){case u.Solid:return new r.PAGSolidLayer(e);case u.Text:return new r.PAGTextLayer(e);case u.Image:return new r.PAGImageLayer(e);default:return new r.PAGLayer(e)}},C=e=>(null==e?void 0:e.wasmIns)?e.wasmIns:e,T=(e,t)=>void 0!==t&&e instanceof t;var x=Object.defineProperty,P=Object.getOwnPropertyDescriptor;let S=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}uniqueID(){return this.wasmIns._uniqueID()}layerType(){return this.wasmIns._layerType()}layerName(){return this.wasmIns._layerName()}matrix(){const e=this.wasmIns._matrix();if(!e)throw new Error("Get matrix fail!");return new w(e)}setMatrix(e){this.wasmIns._setMatrix(e.wasmIns)}resetMatrix(){this.wasmIns._resetMatrix()}getTotalMatrix(){if(!this.wasmIns._getTotalMatrix())throw new Error("Get total matrix fail!");return new w(this.wasmIns._getTotalMatrix())}alpha(){return this.wasmIns._alpha()}setAlpha(e){this.wasmIns._setAlpha(e)}visible(){return this.wasmIns._visible()}setVisible(e){this.wasmIns._setVisible(e)}editableIndex(){return this.wasmIns._editableIndex()}parent(){const e=this.wasmIns._parent();if(!e)throw new Error("Get total matrix fail!");return new k(e)}markers(){const e=this.wasmIns._markers();if(!e)throw new Error("Get markers fail!");return b(e,(e=>e))}localTimeToGlobal(e){return this.wasmIns._localTimeToGlobal(e)}globalToLocalTime(e){return this.wasmIns._globalToLocalTime(e)}duration(){return this.wasmIns._duration()}frameRate(){return this.wasmIns._frameRate()}startTime(){return this.wasmIns._startTime()}setStartTime(e){this.wasmIns._setStartTime(e)}currentTime(){return this.wasmIns._currentTime()}setCurrentTime(e){this.wasmIns._setCurrentTime(e)}getProgress(){return this.wasmIns._getProgress()}setProgress(e){this.wasmIns._setProgress(e)}preFrame(){this.wasmIns._preFrame()}nextFrame(){this.wasmIns._nextFrame()}getBounds(){return this.wasmIns._getBounds()}trackMatteLayer(){const e=this.wasmIns._trackMatteLayer();if(!e)throw new Error("Get track matte layer fail!");return E(e)}excludedFromTimeline(){return this.wasmIns._excludedFromTimeline()}setExcludedFromTimeline(e){this.wasmIns._setExcludedFromTimeline(e)}isPAGFile(){return this.wasmIns._isPAGFile()}asTypeLayer(){return E(this)}isDelete(){return this.wasmIns.isDelete()}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};S=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?P(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&x(t,r,a),a})([a,n],S);var A=Object.defineProperty,I=Object.getOwnPropertyDescriptor;let k=class extends S{static make(e,t){const n=r._PAGComposition._Make(e,t);if(!n)throw new Error("Make PAGComposition fail!");return new k(n)}width(){return this.wasmIns._width()}height(){return this.wasmIns._height()}setContentSize(e,t){this.wasmIns._setContentSize(e,t)}numChildren(){return this.wasmIns._numChildren()}getLayerAt(e){const t=this.wasmIns._getLayerAt(e);if(!t)throw new Error(`Get layer at ${e} fail!`);return E(t)}getLayerIndex(e){return this.wasmIns._getLayerIndex(e.wasmIns)}setLayerIndex(e,t){return this.wasmIns._setLayerIndex(e.wasmIns,t)}addLayer(e){return this.wasmIns._addLayer(e.wasmIns)}addLayerAt(e,t){return this.wasmIns._addLayerAt(e.wasmIns,t)}contains(e){return this.wasmIns._contains(e.wasmIns)}removeLayer(e){const t=this.wasmIns._removeLayer(e.wasmIns);if(!t)throw new Error("Remove layer fail!");return E(t)}removeLayerAt(e){const t=this.wasmIns._removeLayerAt(e);if(!t)throw new Error(`Remove layer at ${e} fail!`);return E(t)}removeAllLayers(){this.wasmIns._removeAllLayers()}swapLayer(e,t){this.wasmIns._swapLayer(e.wasmIns,t.wasmIns)}swapLayerAt(e,t){this.wasmIns._swapLayerAt(e,t)}audioBytes(){return this.wasmIns._audioBytes()}audioMarkers(){const e=this.wasmIns._audioMarkers();if(!e)throw new Error("Get audioMarkers fail!");return b(e,(e=>e))}audioStartTime(){return this.wasmIns._audioStartTime()}getLayersByName(e){const t=this.wasmIns._getLayersByName(e);if(!t)throw new Error(`Get layers by ${e} fail!`);return b(t,E)}getLayersUnderPoint(e,t){const r=this.wasmIns._getLayersUnderPoint(e,t);if(!r)throw new Error(`Get layers under point ${e},${t} fail!`);return b(r,E)}};k=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?I(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&A(t,r,a),a})([a,n],k);const F=e=>new Promise((t=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{console.error(r.error.message)},r.readAsArrayBuffer(e)})),D=(e,t)=>{const r=new Uint8Array(t),n=r.byteLength,i=e._malloc(n);return new Uint8Array(e.HEAPU8.buffer,i,n).set(r),{byteOffset:i,length:n,free:()=>e._free(i)}};var L=Object.defineProperty,M=Object.getOwnPropertyDescriptor,O=(e,t,r,n)=>{for(var i,a=n>1?void 0:n?M(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&L(t,r,a),a};let R=class extends k{static async load(e){const t=await(e=>T(e,globalThis.File)?F(e):T(e,globalThis.Blob)?F(new File([e],"")):T(e,globalThis.ArrayBuffer)?Promise.resolve(e):Promise.resolve(null))(e);if(!t)throw new Error("Initialize PAGFile data type error, please put check data type must to be File ｜ Blob | ArrayBuffer!");return R.loadFromBuffer(t)}static loadFromBuffer(e){if(!(e&&e.byteLength>0))throw new Error("Initialize PAGFile data not be empty!");const{byteOffset:t,length:n,free:i}=D(r,e),a=r._PAGFile._Load(t,n);if(i(),!a)throw new Error("Load PAGFile fail!");return new R(a)}static maxSupportedTagLevel(){return r._PAGFile._MaxSupportedTagLevel()}tagLevel(){return this.wasmIns._tagLevel()}numTexts(){return this.wasmIns._numTexts()}numImages(){return this.wasmIns._numImages()}numVideos(){return this.wasmIns._numVideos()}getTextData(e){return this.wasmIns._getTextData(e)}replaceText(e,t){this.wasmIns._replaceText(e,t)}replaceImage(e,t){this.wasmIns._replaceImage(e,t.wasmIns)}getLayersByEditableIndex(e,t){const r=this.wasmIns._getLayersByEditableIndex(e,t);if(!r)throw new Error(`Get ${(e=>{switch(e){case u.Solid:return"Solid";case u.Text:return"Text";case u.Shape:return"Shape";case u.Image:return"Image";case u.PreCompose:return"PreCompose";default:return"Unknown"}})(t)} layers by ${e} fail!`);return b(r,E)}getEditableIndices(e){return this.wasmIns._getEditableIndices(e)}timeStretchMode(){return this.wasmIns._timeStretchMode()}setTimeStretchMode(e){this.wasmIns._setTimeStretchMode(e)}setDuration(e){this.wasmIns._setDuration(e)}copyOriginal(){const e=this.wasmIns._copyOriginal();if(!e)throw new Error("Copy original fail!");return new R(e)}};O([i],R,"load",1),R=O([a,n],R);var N=Object.defineProperty,G=Object.getOwnPropertyDescriptor;let B=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}static fromCanvas(e){const t=r._PAGSurface._FromCanvas(e);if(!t)throw new Error(`Make PAGSurface from canvas ${e} fail!`);return new B(t)}static fromTexture(e,t,n,i){const a=r._PAGSurface._FromTexture(e,t,n,i);if(!a)throw new Error(`Make PAGSurface from texture ${e} fail!`);return new B(a)}static fromRenderTarget(e,t,n,i){const a=r._PAGSurface._FromRenderTarget(e,t,n,i);if(!a)throw new Error(`Make PAGSurface from frameBuffer ${e} fail!`);return new B(a)}width(){return this.wasmIns._width()}height(){return this.wasmIns._height()}updateSize(){this.wasmIns._updateSize()}clearAll(){return this.wasmIns._clearAll()}freeCache(){this.wasmIns._freeCache()}readPixels(e,t){if(e===m.Unknown)return null;const n=this.width()*(e===m.ALPHA_8?1:4),i=n*this.height(),a=new Uint8Array(i),{data:o,free:s}=((e,t,r)=>{const n=new Uint8Array(t),i=e._malloc(n.byteLength);if(!r(i,n.byteLength))return{data:null,free:()=>e._free(i)};const a=new Uint8Array(e.HEAPU8.buffer,i,n.byteLength);return n.set(a),{data:n,free:()=>e._free(i)}})(r,a,(r=>this.wasmIns._readPixels(e,t,r,n)));return s(),o}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};B=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?G(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&N(t,r,a),a})([a,n],B);var j=Object.defineProperty,U=Object.getOwnPropertyDescriptor,V=(e,t,r,n)=>{for(var i,a=n>1?void 0:n?U(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&j(t,r,a),a};let $=class{constructor(e){this.isDestroyed=!1,this.videoReaders=[],this.wasmIns=e}static create(){const e=new r._PAGPlayer;if(!e)throw new Error("Create PAGPlayer fail!");return new $(e)}setProgress(e){this.wasmIns._setProgress(e)}async flush(){return r.webAssemblyQueue.exec(this.wasmIns._flush,this.wasmIns)}async flushInternal(e){const t=await r.webAssemblyQueue.exec((async()=>{r.currentPlayer=this;const t=await this.wasmIns._flush();return r.currentPlayer=null,e(t),t}),this.wasmIns);for(const e of this.videoReaders){const t=await e.getError();if(null!==t)throw t}return t}duration(){return this.wasmIns._duration()}getProgress(){return this.wasmIns._getProgress()}currentFrame(){return this.wasmIns._currentFrame()}videoEnabled(){return this.wasmIns._videoEnabled()}setVideoEnabled(e){this.wasmIns._setVideoEnabled(e)}cacheEnabled(){return this.wasmIns._cacheEnabled()}setCacheEnabled(e){this.wasmIns._setCacheEnabled(e)}cacheScale(){return this.wasmIns._cacheScale()}setCacheScale(e){this.wasmIns._setCacheScale(e)}maxFrameRate(){return this.wasmIns._maxFrameRate()}setMaxFrameRate(e){this.wasmIns._setMaxFrameRate(e)}scaleMode(){return this.wasmIns._scaleMode()}setScaleMode(e){this.wasmIns._setScaleMode(e)}setSurface(e){this.wasmIns._setSurface(C(e))}getComposition(){const e=this.wasmIns._getComposition();if(!e)throw new Error("Get composition fail!");return e._isPAGFile()?new R(e):new k(e)}setComposition(e){this.wasmIns._setComposition(C(e))}getSurface(){const e=this.wasmIns._getSurface();if(!e)throw new Error("Get surface fail!");return new B(e)}matrix(){const e=this.wasmIns._matrix();if(!e)throw new Error("Get matrix fail!");return new w(e)}setMatrix(e){this.wasmIns._setMatrix(e.wasmIns)}nextFrame(){this.wasmIns._nextFrame()}preFrame(){this.wasmIns._preFrame()}autoClear(){return this.wasmIns._autoClear()}setAutoClear(e){this.wasmIns._setAutoClear(e)}getBounds(e){return this.wasmIns._getBounds(e.wasmIns)}getLayersUnderPoint(e,t){const r=this.wasmIns._getLayersUnderPoint(e,t);if(!r)throw new Error(`Get layers under point, x: ${e} y:${t} fail!`);return b(r,E)}hitTestPoint(e,t,r,n=!1){return this.wasmIns._hitTestPoint(e.wasmIns,t,r,n)}renderingTime(){return this.wasmIns._renderingTime()}imageDecodingTime(){return this.wasmIns._imageDecodingTime()}presentingTime(){return this.wasmIns._presentingTime()}graphicsMemory(){return this.wasmIns._graphicsMemory()}prepare(){return r.webAssemblyQueue.exec((async()=>{r.currentPlayer=this,await this.wasmIns._prepare(),r.currentPlayer=null}),this.wasmIns)}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}linkVideoReader(e){this.videoReaders.push(e)}unlinkVideoReader(e){const t=this.videoReaders.indexOf(e);-1!==t&&this.videoReaders.splice(t,1)}};V([i],$.prototype,"flush",1),V([i],$.prototype,"flushInternal",1),$=V([a,n],$);var W=Object.defineProperty,H=Object.getOwnPropertyDescriptor,z=(e,t,r,n)=>{for(var i,a=n>1?void 0:n?H(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&W(t,r,a),a};let q=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}static async fromFile(e){return new Promise(((t,r)=>{const n=new Image;n.onload=async()=>{t(q.fromSource(n))},n.onerror=e=>{r(e)},n.src=URL.createObjectURL(e)}))}static fromSource(e){const t=r._PAGImage._FromNativeImage(e);if(!t)throw new Error("Make PAGImage from source fail!");return new q(t)}static fromPixels(e,t,n,i,a){const o=t*(i===m.ALPHA_8?1:4),{byteOffset:s,free:l}=D(r,e),c=r._PAGImage._FromPixels(s,t,n,o,i,a);if(l(),!c)throw new Error("Make PAGImage from pixels fail!");return new q(c)}static fromTexture(e,t,n,i){const a=r._PAGImage._FromTexture(e,t,n,i);if(!a)throw new Error("Make PAGImage from texture fail!");return new q(a)}width(){return this.wasmIns._width()}height(){return this.wasmIns._height()}scaleMode(){return this.wasmIns._scaleMode()}setScaleMode(e){this.wasmIns._setScaleMode(e)}matrix(){const e=this.wasmIns._matrix();if(!e)throw new Error("Get matrix fail!");return new w(e)}setMatrix(e){this.wasmIns._setMatrix(e.wasmIns)}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};z([i],q,"fromFile",1),q=z([a,n],q);class J{constructor(){this.listenerMap=new Map}on(e,t){let r=[];this.listenerMap.has(e)&&(r=this.listenerMap.get(e)),r.push(t),this.listenerMap.set(e,r)}off(e,t){if(!this.listenerMap.has(e))return!1;const r=this.listenerMap.get(e);if(0===r.length)return!1;if(!t)return this.listenerMap.delete(e),!0;const n=r.indexOf(t);return-1!==n&&(r.splice(n,1),!0)}emit(e,t){if(!this.listenerMap.has(e))return!1;const r=this.listenerMap.get(e);return 0!==r.length&&(r.forEach((e=>e(t))),!0)}}const Y=2560,X={depth:!1,stencil:!1,antialias:!1},K=(null==navigator?void 0:navigator.userAgent)||"",Q=/android|adr/i.test(K),Z=/(mobile)/i.test(K)&&Q;!/(mobile)/i.test(K)&&!Z&&/Mac OS X/i.test(K);const ee=/(iphone|ipad|ipod)/i.test(K),te=/MicroMessenger/i.test(K),re=/^((?!chrome|android).)*safari/i.test(K)||ee,ne="function"==typeof globalThis.importScripts,ie=new Array,ae=e=>T(e,globalThis.OffscreenCanvas),oe=(e,t)=>{let r=ie.pop()||le();return null!==r&&(r.width=e,r.height=t),r},se=e=>{ie.length<10&&ie.push(e)},le=()=>{if(re&&!ne)return document.createElement("canvas");try{const e=new OffscreenCanvas(0,0);return"function"==typeof e.getContext("2d").measureText?e:document.createElement("canvas")}catch(e){return document.createElement("canvas")}};var ce=Object.defineProperty,ue=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,he=(e,t,r)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class me{constructor(e,t=!1){this.isDestroyed=!1,this.oldHandle=0,this.handle=e,this.adopted=t}static from(e){if(e instanceof me)return new me(e.handle,!0);{const t=T(e,globalThis.WebGL2RenderingContext)?2:1,{GL:n}=r;let i=0;return n.contexts.length>0&&(i=n.contexts.findIndex((t=>(null==t?void 0:t.GLctx)===e))),i<1?(i=n.registerContext(e,((e,t)=>{for(var r in t||(t={}))de.call(t,r)&&he(e,r,t[r]);if(ue)for(var r of ue(t))fe.call(t,r)&&he(e,r,t[r]);return e})({majorVersion:t,minorVersion:0},X)),new me(i)):new me(i,!0)}}getContext(){return r.GL.getContext(this.handle).GLctx}makeCurrent(){var e;return!this.isDestroyed&&(this.oldHandle=(null==(e=r.GL.currentContext)?void 0:e.handle)||0,this.oldHandle===this.handle||r.GL.makeContextCurrent(this.handle))}clearCurrent(){this.isDestroyed||this.oldHandle!==this.handle&&(r.GL.makeContextCurrent(0),this.oldHandle&&r.GL.makeContextCurrent(this.oldHandle))}registerTexture(e){return this.register(r.GL.textures,e)}getTexture(e){return r.GL.textures[e]}unregisterTexture(e){r.GL.textures[e]=null}registerRenderTarget(e){return this.register(r.GL.framebuffers,e)}getRenderTarget(e){return r.GL.framebuffers[e]}unregisterRenderTarget(e){r.GL.framebuffers[e]=null}destroy(){this.adopted||r.GL.deleteContext(this.handle)}register(e,t){const n=r.GL.getNewId(e);return e[n]=t,n}}var pe=Object.defineProperty,ge=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,we=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))ve.call(t,r)&&we(e,r,t[r]);if(ge)for(var r of ge(t))ye.call(t,r)&&we(e,r,t[r]);return e};const be=[];class Ee{constructor(e,t){this._canvas=null,this._glContext=null,this.retainCount=0,this._canvas=e;const r=e.getContext("webgl",_e(_e({},X),t));if(!r)throw new Error("Canvas context is not WebGL!");this._glContext=me.from(r)}static from(e,t){let r=be.find((t=>t.canvas===e));return r||(r=new Ee(e,t),be.push(r),r)}retain(){this.retainCount+=1}release(){if(this.retainCount-=1,0===this.retainCount){if(!this._glContext)return;this._glContext.destroy(),this._glContext=null,this._canvas=null}}get canvas(){return this._canvas}get glContext(){return this._glContext}}let Ce;try{Ce=performance.now.bind(performance)}catch(e){Ce=Date.now.bind(Date)}class Te{constructor(){this.startTime=Ce(),this.markers={}}reset(){this.startTime=Ce(),this.markers={}}mark(e){e?Object.keys(this.markers).find((t=>t===e))?console.log(`Clock.mark(): The specified marker name '${e}' already exists!`):this.markers[e]=Ce():console.log("Clock.mark(): An empty marker name was specified!")}measure(e,t){let r,n;if(e){if(!Object.keys(this.markers).find((t=>t===e)))return console.log(`Clock.measure(): The specified makerFrom '${e}' does not exist!`),0;r=this.markers[e]}else r=this.startTime;if(t){if(!Object.keys(this.markers).find((e=>e===t)))return console.log(`Clock.measure(): The specified makerTo '${t}' does not exist!`),0;n=this.markers[t]}else n=Ce();return n-r}}var xe=Object.defineProperty,Pe=Object.getOwnPropertyDescriptor,Se=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fe=(e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&ke(e,r,t[r]);if(Se)for(var r of Se(t))Ie.call(t,r)&&ke(e,r,t[r]);return e};let De=class{constructor(e,t){this.repeatCount=0,this.isPlaying=!1,this.isDestroyed=!1,this.pagViewOptions={useScale:!0,useCanvas2D:!1,firstFrame:!0},this.renderCanvas=null,this.pagGlContext=null,this.frameRate=0,this.pagSurface=null,this.playFrame=-1,this.timer=null,this.flushingNextFrame=!1,this.playTime=0,this.startTime=0,this.repeatedTimes=0,this.eventManager=new J,this.rawWidth=0,this.rawHeight=0,this.debugData={FPS:0,flushTime:0},this.fpsBuffer=[],this.player=e,this.canvasElement=t}static async init(e,t,n={}){let i=null;if("string"==typeof t?i=document.getElementById(t.substr(1)):("undefined"!=typeof window&&T(t,globalThis.HTMLCanvasElement)||ae(t))&&(i=t),!i)throw new Error("Canvas is not found!");const a=r.PAGPlayer.create(),o=new De(a,i);return o.pagViewOptions=Fe(Fe({},o.pagViewOptions),n),o.pagViewOptions.useCanvas2D?(r.globalCanvas.retain(),o.pagGlContext=me.from(r.globalCanvas.glContext)):(o.renderCanvas=Ee.from(i),o.renderCanvas.retain(),o.pagGlContext=me.from(o.renderCanvas.glContext)),o.resetSize(o.pagViewOptions.useScale),o.frameRate=e.frameRate(),o.pagSurface=this.makePAGSurface(o.pagGlContext,o.rawWidth,o.rawHeight),o.player.setSurface(o.pagSurface),o.player.setComposition(e),o.setProgress(0),o.pagViewOptions.firstFrame&&(await o.flush(),o.playFrame=0),o}static makePAGSurface(e,t,r){if(!e.makeCurrent())throw new Error("Make context current fail!");const n=B.fromRenderTarget(0,t,r,!0);return e.clearCurrent(),n}duration(){return this.player.duration()}addListener(e,t){return this.eventManager.on(e,t)}removeListener(e,t){return this.eventManager.off(e,t)}async play(){if(this.isPlaying)return;this.isPlaying=!0,this.startTime=1e3*this.getNowTime()-this.playTime;for(const e of this.player.videoReaders)e.isPlaying=!0;const e=this.playTime;await this.flushLoop(!0),0===e&&this.eventManager.emit("onAnimationStart",this),this.eventManager.emit("onAnimationPlay",this),0===this.playFrame&&this.eventManager.emit("onAnimationUpdate",this)}pause(){if(this.isPlaying){this.clearTimer();for(const e of this.player.videoReaders)e.pause();this.isPlaying=!1,this.eventManager.emit("onAnimationPause",this)}}async stop(e=!0){this.clearTimer(),this.playTime=0,this.player.setProgress(0),this.playFrame=0,await this.flush();for(const e of this.player.videoReaders)e.stop();this.isPlaying=!1,e&&this.eventManager.emit("onAnimationCancel",this)}setRepeatCount(e){this.repeatCount=e<0?0:e-1}getProgress(){return this.player.getProgress()}currentFrame(){return this.player.currentFrame()}setProgress(e){return this.playTime=e*this.duration(),this.startTime=1e3*this.getNowTime()-this.playTime,this.isPlaying||this.player.setProgress(e),e}videoEnabled(){return this.player.videoEnabled()}setVideoEnabled(e){this.player.setVideoEnabled(e)}cacheEnabled(){return this.player.cacheEnabled()}setCacheEnabled(e){this.player.setCacheEnabled(e)}cacheScale(){return this.player.cacheScale()}setCacheScale(e){this.player.setCacheScale(e)}maxFrameRate(){return this.player.maxFrameRate()}setMaxFrameRate(e){this.player.setMaxFrameRate(e)}scaleMode(){return this.player.scaleMode()}setScaleMode(e){this.player.setScaleMode(e)}async flush(){const e=new Te,t=await this.player.flushInternal((t=>{var n,i;if(this.pagViewOptions.useCanvas2D&&t&&r.globalCanvas.canvas){this.canvasContext||(this.canvasContext=null==(n=this.canvasElement)?void 0:n.getContext("2d"));const e=this.canvasContext.globalCompositeOperation;this.canvasContext.globalCompositeOperation="copy",null==(i=this.canvasContext)||i.drawImage(r.globalCanvas.canvas,0,r.globalCanvas.canvas.height-this.rawHeight,this.rawWidth,this.rawHeight,0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.globalCompositeOperation=e}e.mark("flush"),this.setDebugData({flushTime:e.measure("","flush")}),this.updateFPS()}));return this.eventManager.emit("onAnimationUpdate",this),t&&this.eventManager.emit("onAnimationFlushed",this),t}freeCache(){var e;null==(e=this.pagSurface)||e.freeCache()}getComposition(){return this.player.getComposition()}setComposition(e){this.player.setComposition(e)}matrix(){return this.player.matrix()}setMatrix(e){this.player.setMatrix(e)}getLayersUnderPoint(e,t){return this.player.getLayersUnderPoint(e,t)}updateSize(){var e;if(!this.canvasElement)throw new Error("Canvas element is not found!");if(this.rawWidth=this.canvasElement.width,this.rawHeight=this.canvasElement.height,!this.pagGlContext)return;const t=De.makePAGSurface(this.pagGlContext,this.rawWidth,this.rawHeight);this.player.setSurface(t),null==(e=this.pagSurface)||e.destroy(),this.pagSurface=t}prepare(){return this.player.prepare()}makeSnapshot(){return createImageBitmap(this.canvasElement)}destroy(){var e,t,n;this.clearTimer(),this.player.destroy(),null==(e=this.pagSurface)||e.destroy(),this.pagViewOptions.useCanvas2D?r.globalCanvas.release():null==(t=this.renderCanvas)||t.release(),null==(n=this.pagGlContext)||n.destroy(),this.pagGlContext=null,this.canvasContext=null,this.canvasElement=null,this.isDestroyed=!0}getDebugData(){return this.debugData}setDebugData(e){this.debugData=Fe(Fe({},this.debugData),e)}async flushLoop(e=!1){if(this.isPlaying&&(this.setTimer(),!this.flushingNextFrame))try{this.flushingNextFrame=!0,await this.flushNextFrame(e),this.flushingNextFrame=!1}catch(e){throw this.flushingNextFrame=!1,"The play() request was interrupted because the document was hidden!"!==e.message&&this.clearTimer(),e}}async flushNextFrame(e=!1){const t=this.duration();this.playTime=1e3*this.getNowTime()-this.startTime;const r=Math.floor(this.playTime/1e6*this.frameRate),n=Math.floor(this.playTime/t);if(!e&&this.repeatCount>=0&&n>this.repeatCount)return this.clearTimer(),this.player.setProgress(1),await this.flush(),this.playTime=0,this.isPlaying=!1,this.repeatedTimes=0,this.eventManager.emit("onAnimationEnd",this),!0;if(!e&&this.repeatedTimes===n&&this.playFrame===r)return!1;this.repeatedTimes<n&&this.eventManager.emit("onAnimationRepeat",this),this.player.setProgress(this.playTime%t/t);const i=await this.flush();return this.needResetStartTime()&&(this.startTime=1e3*this.getNowTime()-this.playTime),this.playFrame=r,this.repeatedTimes=n,i}getNowTime(){try{return performance.now()}catch(e){return Date.now()}}setTimer(){this.timer=ne?self.setTimeout((()=>{this.flushLoop()}),1/this.frameRate*1e3):globalThis.requestAnimationFrame((()=>{this.flushLoop()}))}clearTimer(){this.timer&&(ne?self.clearTimeout(this.timer):globalThis.cancelAnimationFrame(this.timer),this.timer=null)}resetSize(e=!0){if(!this.canvasElement)throw new Error("Canvas element is not found!");if(!e||ae(this.canvasElement))return this.rawWidth=this.canvasElement.width,void(this.rawHeight=this.canvasElement.height);const t=this.canvasElement,r=(e=>{const t=globalThis.getComputedStyle(e,null),r={width:Number(t.width.replace("px","")),height:Number(t.height.replace("px",""))};if(r.width>0&&r.height>0)return r;{const t={width:Number(e.style.width.replace("px","")),height:Number(e.style.height.replace("px",""))};return t.width>0&&t.height>0?t:{width:e.width,height:e.height}}})(t);t.style.width=`${r.width}px`,t.style.height=`${r.height}px`,this.rawWidth=r.width*globalThis.devicePixelRatio,this.rawHeight=r.height*globalThis.devicePixelRatio,t.width=this.rawWidth,t.height=this.rawHeight}updateFPS(){let e;try{e=performance.now()}catch(t){e=Date.now()}this.fpsBuffer=this.fpsBuffer.filter((t=>e-t<=1e3)),this.fpsBuffer.push(e),this.setDebugData({FPS:this.fpsBuffer.length})}needResetStartTime(){for(const e of this.player.videoReaders)if(e.isSought)return!0;return!1}};De=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?Pe(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&xe(t,r,a),a})([a],De);const Le=["emoji"].concat(...["Arial",'"Courier New"',"Georgia",'"Times New Roman"','"Trebuchet MS"',"Verdana"]);var Me=Object.defineProperty,Oe=Object.getOwnPropertyDescriptor,Re=(e,t,r,n)=>{for(var i,a=n>1?void 0:n?Oe(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&Me(t,r,a),a};let Ne=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e,this.fontFamily=this.wasmIns.fontFamily,this.fontStyle=this.wasmIns.fontStyle}static create(e,t){const n=r._PAGFont._create(e,t);if(!n)throw new Error("Create PAGFont fail!");return new Ne(n)}static async registerFont(e,t){const r=await F(t);if(!(r&&r.byteLength>0))throw new Error("Initialize PAGFont data not be empty!");const n=new Uint8Array(r),i=new FontFace(e,n);document.fonts.add(i),await i.load()}static registerFallbackFontNames(e=[]){const t=new r.VectorString,n=e.concat(Le);for(const e of n)t.push_back(e);r._PAGFont._SetFallbackFontNames(t),t.delete()}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};Re([i],Ne,"registerFont",1),Ne=Re([a,n],Ne);let Ge={};const Be=(e,t,r,n=!1)=>{var i;t in Ge||(Ge[t]=[]),null==(i=Ge[t])||i.push({node:e,handler:r,capture:n}),e.addEventListener(t,r,n)},je=(e,t,r)=>{var n;t in Ge&&(null==(n=Ge[t])||n.filter((({node:t,handler:n})=>t===e&&n===r)).forEach((({node:e,handler:r,capture:n})=>e.removeEventListener(t,r,n))))},Ue=(e,t)=>{var r,n;t in Ge&&(null==(r=Ge[t])||r.filter((({node:t})=>t===e)).forEach((({node:e,handler:r,capture:n})=>e.removeEventListener(t,r,n))),Ge[t]=null==(n=Ge[t])?void 0:n.filter((({node:t})=>t!==e)))};var Ve=(e=>(e.PAGInit="PAGInit",e.PAGView_init="PAGView.init",e.PAGView_duration="PAGView.duration",e.PAGView_play="PAGView.play",e.PAGView_pause="PAGView.pause",e.PAGView_stop="PAGView.stop",e.PAGView_setRepeatCount="PAGView.setRepeatCount",e.PAGView_getProgress="PAGView.getProgress",e.PAGView_currentFrame="PAGView.currentFrame",e.PAGView_setProgress="PAGView.setProgress",e.PAGView_scaleMode="PAGView.scaleMode",e.PAGView_setScaleMode="PAGView.setScaleMode",e.PAGView_flush="PAGView.flush",e.PAGView_getDebugData="PAGView.getDebugData",e.PAGView_destroy="PAGView.destroy",e.PAGFile_load="PAGFile.load",e.PAGFile_getTextData="PAGFile.getTextData",e.PAGFile_replaceText="PAGFile.replaceText",e.PAGFile_replaceImage="PAGFile.replaceImage",e.PAGFile_destroy="PAGFile.destroy",e.PAGImage_fromSource="PAGImage.fromSource",e.PAGImage_destroy="PAGImage.destroy",e.VideoReader_constructor="VideoReader.constructor",e.VideoReader_prepare="VideoReader.prepare",e.VideoReader_play="VideoReader.play",e.VideoReader_pause="VideoReader.pause",e.VideoReader_stop="VideoReader.stop",e.VideoReader_getError="VideoReader.getError",e.PAGModule_linkVideoReader="PAGModule.linkVideoReader",e.TextDocument_delete="TextDocument.delete",e))(Ve||{});let $e=0;const We=(e,t,r,n=[])=>new Promise((i=>{const a=(e=>`${e}_${$e++}`)(t.name),o=t=>{t.data.name===a&&(e.removeEventListener("message",o),i(r(...t.data.args)))};e.addEventListener("message",o),e.postMessage({name:a,args:t.args},n)}));class He{constructor(e){this.bitmap=e}setBitmap(e){this.bitmap&&this.bitmap.close(),this.bitmap=e}}class ze{constructor(e){this.bitmap=null,this.isSought=!1,this.isPlaying=!1,this.bitmapImage=new He(null),this.proxyId=e}prepare(e,t){return new Promise((r=>{We(self,{name:Ve.VideoReader_prepare,args:[this.proxyId,e,t]},(e=>{this.bitmapImage.setBitmap(e),r()}))}))}getVideo(){return this.bitmapImage}onDestroy(){self.postMessage({name:"VideoReader.onDestroy",args:[this.proxyId]})}play(){return new Promise((e=>{We(self,{name:Ve.VideoReader_play,args:[this.proxyId]},(()=>{e()}))}))}pause(){We(self,{name:Ve.VideoReader_pause,args:[this.proxyId]},(()=>{}))}stop(){We(self,{name:Ve.VideoReader_stop,args:[this.proxyId]},(()=>{}))}getError(){return new Promise((e=>{We(self,{name:Ve.VideoReader_getError,args:[this.proxyId]},(t=>{e(t)}))}))}}const qe=e=>new Promise((t=>{const r=()=>{je(e,"canplay",r),clearTimeout(n),t(!0)};Be(e,"canplay",r);const n=setTimeout((()=>{je(e,"canplay",r),t(!1)}),1e3)}));class Je{constructor(e,t,n,i,a,o=!1){if(this.isSought=!1,this.isPlaying=!1,this.bitmap=null,this.videoEl=null,this.frameRate=0,this.canplay=!1,this.staticTimeRanges=null,this.disablePlaybackRate=!1,this.error=null,this.player=null,this.width=0,this.height=0,this.bitmapCanvas=null,this.bitmapCtx=null,T(e,globalThis.HTMLVideoElement))this.videoEl=e,this.canplay=!0;else{this.videoEl=document.createElement("video"),this.videoEl.style.display="none",this.videoEl.muted=!0,this.videoEl.playsInline=!0,this.videoEl.preload="auto",this.videoEl.width=t,this.videoEl.height=n,qe(this.videoEl).then((()=>{this.canplay=!0}));const r=new Blob([e],{type:"video/mp4"});this.videoEl.src=URL.createObjectURL(r),ee&&this.videoEl.load()}this.frameRate=i,this.width=t,this.height=n,this.staticTimeRanges=new Ye(a),(3840<t||3840<n)&&(this.disablePlaybackRate=!0),o||this.linkPlayer(r.currentPlayer)}static async create(e,t,n,i,a){var o;if(ne){const s=await new Promise((r=>{const o=e,s=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength);We(self,{name:Ve.VideoReader_constructor,args:[s,t,n,i,a,!0]},(e=>{r(e)}),[s])})),l=new ze(s);return null==(o=r.currentPlayer)||o.linkVideoReader(l),l}return new Je(e,t,n,i,a)}async prepare(e,t){var r;this.setError(null),this.isSought=!1;const{currentTime:n}=this.videoEl,i=e/this.frameRate;if(0===n&&0===i)if(this.canplay||re){try{await this.play()}catch(e){this.setError(e)}await new Promise((e=>{requestAnimationFrame((()=>{this.pause(),e()}))}))}else await qe(this.videoEl);else if(Math.round(i*this.frameRate)===Math.round(n*this.frameRate));else{if(null==(r=this.staticTimeRanges)?void 0:r.contains(e))return void await this.seek(i,!1);if(!(Math.abs(n-i)<1/this.frameRate*3))return this.isSought=!0,void await this.seek(i)}const a=Math.min(Math.max(t,.125),4);if(this.disablePlaybackRate||this.videoEl.playbackRate===a||(this.videoEl.playbackRate=a),this.isPlaying&&this.videoEl.paused)try{await this.play()}catch(e){this.setError(e)}}getVideo(){return this.videoEl}async generateBitmap(){var e,t;return this.bitmapCanvas||(this.bitmapCanvas=new OffscreenCanvas(this.width,this.height),this.bitmapCanvas.width=this.width,this.bitmapCanvas.height=this.height,this.bitmapCtx=this.bitmapCanvas.getContext("2d")),null==(e=this.bitmapCtx)||e.fillRect(0,0,this.width,this.height),null==(t=this.bitmapCtx)||t.drawImage(this.videoEl,0,0,this.width,this.height),this.bitmap=await createImageBitmap(this.bitmapCanvas),this.bitmap}async play(){var e;if(this.videoEl.paused){if(te&&window.WeixinJSBridge&&await new Promise((e=>{window.WeixinJSBridge.invoke("getNetworkType",{},(()=>{e()}),(()=>{e()}))})),"visible"!==document.visibilityState){const e=()=>{"visible"===document.visibilityState&&(this.videoEl&&this.videoEl.play(),window.removeEventListener("visibilitychange",e))};throw window.addEventListener("visibilitychange",e),new Error("The play() request was interrupted because the document was hidden!")}await(null==(e=this.videoEl)?void 0:e.play())}}pause(){var e;this.isPlaying=!1,this.videoEl.paused||null==(e=this.videoEl)||e.pause()}stop(){var e;this.isPlaying=!1,this.videoEl.paused||null==(e=this.videoEl)||e.pause(),this.videoEl.currentTime=0}getError(){return this.error}onDestroy(){this.player&&this.player.unlinkVideoReader(this),Ue(this.videoEl,"playing"),Ue(this.videoEl,"timeupdate"),this.videoEl=null,this.bitmapCanvas=null,this.bitmapCtx=null}seek(e,t=!0){return new Promise((r=>{let n=!1,i=null;const a=async()=>{var e;if(t&&this.videoEl.paused)try{await this.play()}catch(e){this.setError(e)}else t||this.videoEl.paused||null==(e=this.videoEl)||e.pause()},o=async()=>{if(!this.videoEl)return this.setError(new Error("Video element doesn't exist!")),void r();je(this.videoEl,"seeked",o),await a(),n=!0,clearTimeout(i),i=null,r()};if(!this.videoEl)return this.setError(new Error("Video element doesn't exist!")),void r();Be(this.videoEl,"seeked",o),this.videoEl.currentTime=e,i=setTimeout((()=>{if(!n){if(!this.videoEl)return this.setError(new Error("Video element doesn't exist!")),void r();je(this.videoEl,"seeked",o),a(),r()}}),1e3/this.frameRate*12)}))}setError(e){this.error=e}linkPlayer(e){this.player=e,e&&e.linkVideoReader(this)}}class Ye{constructor(e){this.timeRanges=e}contains(e){if(0===this.timeRanges.length)return!1;for(let t of this.timeRanges)if(t.start<=e&&e<t.end)return!0;return!1}}const Xe=e=>{const t=new Int32Array(e.data.buffer);return{left:Ke(t,e.width,e.height),top:Qe(t,e.width,e.height),right:Ze(t,e.width,e.height),bottom:et(t,e.width,e.height)}},Ke=(e,t,r)=>{const n=e.length/t,i=e.length/r;for(let r=0;r<i;r++)for(let i=0;i<n;i++)if(0!==e[r+i*t])return r;return i},Qe=(e,t,r)=>{const n=e.length/t,i=e.length/r;for(let r=0;r<n;r++)for(let n=0;n<i;n++)if(0!==e[r*t+n])return r;return n},Ze=(e,t,r)=>{const n=e.length/t;for(let i=e.length/r-1;i>0;i--)for(let r=n-1;r>0;r--)if(0!==e[i+t*r])return i;return 0},et=(e,t,r)=>{const n=e.length/t,i=e.length/r;for(let r=n-1;r>0;r--)for(let n=i-1;n>0;n--)if(0!==e[r*t+n])return r;return 0};class tt{constructor(e,t,r,n=!1,i=!1){this.fontBoundingBoxMap=[],this.fontName=e,this.fontStyle=t,this.size=r,this.fauxBold=n,this.fauxItalic=i,this.loadCanvas()}static setCanvas(e){tt.canvas=e}static setContext(e){tt.context=e}static isEmoji(e){return new RegExp("\\p{Extended_Pictographic}|[#*0-9]\\uFE0F?\\u20E3|[\\uD83C\\uDDE6-\\uD83C\\uDDFF]","u").test(e)}fontString(){const e=[];this.fauxItalic&&e.push("italic"),this.fauxBold&&e.push("bold"),e.push(`${this.size}px`);const t=Le.concat();return t.unshift(...((e,t="")=>{if(!e)return[];const r=e.split(" ");let n=[];1===r.length?n.push(e):(n.push(r.join("")),n.push(r.join(" ")));const i=n.reduce(((e,r)=>(t?(e.push(`"${r} ${t}"`),e.push(`"${r}-${t}"`)):e.push(`"${r}"`),e)),[]);return""!==t&&i.push(`"${e}"`),i})(this.fontName,this.fontStyle)),e.push(`${t.join(",")}`),e.join(" ")}getTextAdvance(e){const{context:t}=tt;return t.font=this.fontString(),t.measureText(e).width}getTextBounds(e){const{context:t}=tt;t.font=this.fontString();const r=this.measureText(t,e);return{left:Math.floor(-r.actualBoundingBoxLeft),top:Math.floor(-r.actualBoundingBoxAscent),right:Math.ceil(r.actualBoundingBoxRight),bottom:Math.ceil(r.actualBoundingBoxDescent)}}generateFontMetrics(){const{context:e}=tt;e.font=this.fontString();const t=this.measureText(e,"中"),r=t.actualBoundingBoxAscent,n=this.measureText(e,"x").actualBoundingBoxAscent;return{ascent:-t.fontBoundingBoxAscent,descent:t.fontBoundingBoxDescent,xHeight:n,capHeight:r}}generateImage(e,t){const r=oe(t.right-t.left,t.bottom-t.top),n=r.getContext("2d");return n.font=this.fontString(),n.fillText(e,-t.left,-t.top),r}loadCanvas(){tt.canvas||(tt.setCanvas(oe(10,10)),tt.setContext(tt.canvas.getContext("2d",{willReadFrequently:!0})))}measureText(e,t){const r=e.measureText(t);if(null==r?void 0:r.actualBoundingBoxAscent)return r;e.canvas.width=1.5*this.size,e.canvas.height=1.5*this.size;const n=[0,this.size];e.clearRect(0,0,e.canvas.width,e.canvas.height),e.font=this.fontString(),e.fillText(t,n[0],n[1]);const i=e.getImageData(0,0,e.canvas.width,e.canvas.height),{left:a,top:o,right:s,bottom:l}=Xe(i);let c;e.clearRect(0,0,e.canvas.width,e.canvas.height);const u=this.fontBoundingBoxMap.find((e=>e.key===this.fontName));if(u)c=u.value;else{e.font=this.fontString(),e.fillText("测",n[0],n[1]);const t=e.getImageData(0,0,e.canvas.width,e.canvas.height);c=Xe(t),this.fontBoundingBoxMap.push({key:this.fontName,value:c}),e.clearRect(0,0,e.canvas.width,e.canvas.height)}return{actualBoundingBoxAscent:n[1]-o,actualBoundingBoxRight:s-n[0],actualBoundingBoxDescent:l-n[1],actualBoundingBoxLeft:n[0]-a,fontBoundingBoxAscent:c.bottom-c.top,fontBoundingBoxDescent:0,width:c.right-c.left}}}class rt{static create(e){return new rt(e)}static getLineCap(e){switch(e){case r.TGFXLineCap.Round:return"round";case r.TGFXLineCap.Square:return"square";default:return"butt"}}static getLineJoin(e){switch(e){case r.TGFXLineJoin.Round:return"round";case r.TGFXLineJoin.Bevel:return"bevel";default:return"miter"}}constructor(e){this.canvas=e,this.context=this.canvas.getContext("2d")}updateCanvas(e){this.canvas=e}fillPath(e,t){this.context.setTransform(1,0,0,1,0,0),t===r.TGFXPathFillType.InverseWinding||t===r.TGFXPathFillType.InverseEvenOdd?(this.context.clip(e,t===r.TGFXPathFillType.InverseEvenOdd?"evenodd":"nonzero"),this.context.fillRect(0,0,this.canvas.width,this.canvas.height)):this.context.fill(e,t===r.TGFXPathFillType.EvenOdd?"evenodd":"nonzero")}fillText(e,t,r,n){const i=new tt(e.name,e.style,e.size,e.bold,e.italic),a=new w(n);this.context.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty),this.context.font=i.fontString();for(let e=0;e<t.size();e++){const n=r.get(e);this.context.fillText(t.get(e),n.x,n.y)}}strokeText(e,t,r,n,i){if(t.width<.5)return;const a=new tt(e.name,e.style,e.size,e.bold,e.italic),o=new w(i);this.context.setTransform(o.a,o.b,o.c,o.d,o.tx,o.ty),this.context.font=a.fontString(),this.context.lineJoin=rt.getLineJoin(t.join),this.context.miterLimit=t.miterLimit,this.context.lineCap=rt.getLineCap(t.cap),this.context.lineWidth=t.width;for(let e=0;e<r.size();e++){const t=n.get(e);this.context.strokeText(r.get(e),t.x,t.y)}}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}}class nt{constructor(){this._canvas=null,this._glContext=null,this.width=Y,this.height=Y,this.retainCount=0}retain(){if(0===this.retainCount){try{this._canvas=new OffscreenCanvas(0,0)}catch(e){this._canvas=document.createElement("canvas")}this._canvas.width=this.width,this._canvas.height=this.height;const e=this._canvas.getContext("webgl",X);if(!e)throw new Error("Canvas context is not WebGL!");this._glContext=me.from(e)}this.retainCount+=1}release(){if(this.retainCount-=1,0===this.retainCount){if(!this._glContext)return;this._glContext.destroy(),this._glContext=null,this._canvas=null}}get canvas(){return this._canvas}get glContext(){return this._glContext}setCanvasSize(e=2560,t=2560){this.width=e,this.height=t,this._glContext&&this._canvas&&(this._canvas.width=e,this._canvas.height=t)}}var it=Object.defineProperty,at=Object.getOwnPropertyDescriptor;let ot=class extends S{static make(e,t,n=0,i="",a=""){return new ot("string"==typeof t?r._PAGTextLayer._Make(e,t,n,i,a):r._PAGTextLayer._Make(e,t))}fillColor(){return this.wasmIns._fillColor()}setFillColor(e){this.wasmIns._setFillColor(e)}font(){return new Ne(this.wasmIns._font())}setFont(e){this.wasmIns._setFont(e.wasmIns)}fontSize(){return this.wasmIns._fontSize()}setFontSize(e){this.wasmIns._setFontSize(e)}strokeColor(){return this.wasmIns._strokeColor()}setStrokeColor(e){this.wasmIns._setStrokeColor(e)}text(){return this.wasmIns._text()}setText(e){this.wasmIns._setText(e)}reset(){this.wasmIns._reset()}};ot=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?at(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&it(t,r,a),a})([a,n],ot);var st=Object.defineProperty,lt=Object.getOwnPropertyDescriptor;let ct=class extends S{static make(e,t,n){const i=r._PAGImageLayer._Make(e,t,n);if(!i)throw new Error("Make PAGImageLayer fail!");return new ct(i)}contentDuration(){return this.wasmIns._contentDuration()}getVideoRanges(){return this.wasmIns._getVideoRanges()}replaceImage(e){this.wasmIns._replaceImage(e.wasmIns)}setImage(e){this.wasmIns._setImage(e.wasmIns)}layerTimeToContent(e){return this.wasmIns._layerTimeToContent(e)}contentTimeToLayer(e){return this.wasmIns._contentTimeToLayer(e)}imageBytes(){return this.wasmIns._imageBytes()}};ct=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?lt(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&st(t,r,a),a})([a,n],ct);var ut=Object.defineProperty,dt=Object.getOwnPropertyDescriptor;let ft=class extends S{static make(e,t,n,i,a){const o=r._PAGSolidLayer._Make(e,t,n,i,a);if(!o)throw new Error("Make PAGSolidLayer fail!");return new ft(o)}solidColor(){return this.wasmIns._solidColor()}setSolidColor(e){this.wasmIns._setSolidColor(e)}};ft=((e,t,r,n)=>{for(var i,a=n>1?void 0:n?dt(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n?i(t,r,a):i(a))||a);return n&&a&&ut(t,r,a),a})([a,n],ft);const ht=e=>new Promise((t=>{const r=new Image;r.onload=function(){t(r)},r.onerror=function(){console.error("image create from bytes error."),t(null)},r.src=e}));var mt=Object.freeze({__proto__:null,createImage:ht,createImageFromBytes:e=>{const t=new Blob([e],{type:"image/*"});return ht(URL.createObjectURL(t))},readImagePixels:(e,t,r,n)=>{if(!t)return null;const i=oe(r,n),a=i.getContext("2d");if(!a)return null;a.drawImage(t,0,0,r,n);const{data:o}=a.getImageData(0,0,r,n);return se(i),0===o.length?null:D(e,o)},hasWebpSupport:()=>{try{return 0===document.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(e){return!1}},getSourceSize:e=>T(e,globalThis.HTMLVideoElement)?{width:e.videoWidth,height:e.videoHeight}:{width:e.width,height:e.height},uploadToTexture:(e,t,r,n)=>{var i;let a=t instanceof He?t.bitmap:t;if(!a)return;const o=null==(i=e.currentContext)?void 0:i.GLctx;o.bindTexture(o.TEXTURE_2D,e.textures[r]),n?(o.pixelStorei(o.UNPACK_ALIGNMENT,1),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.ALPHA,o.UNSIGNED_BYTE,a)):(o.pixelStorei(o.UNPACK_ALIGNMENT,4),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,a),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1))},isAndroidMiniprogram:()=>{if("undefined"!=typeof wx&&wx.getSystemInfoSync)return"android"===wx.getSystemInfoSync().platform},releaseNativeImage:e=>{var t;T(e,globalThis.ImageBitmap)?e.close():(ae(t=e)||T(t,globalThis.HTMLCanvasElement))&&se(e)},getBytesFromPath:async(e,t)=>{const r=await fetch(t).then((e=>e.arrayBuffer()));return D(e,r)},createCanvas2D:oe});var pt=Object.defineProperty,gt=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,wt=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _t=e=>{(e=>{r=e})(e),e.module=e,e.PAGFile=R,e.PAGPlayer=$,e.PAGView=De,e.PAGFont=Ne,e.PAGImage=q,e.PAGLayer=S,e.PAGComposition=k,e.PAGSurface=B,e.PAGTextLayer=ot,e.PAGImageLayer=ct,e.PAGSolidLayer=ft,e.VideoReader=Je,e.ScalerContext=tt,e.WebMask=rt,e.GlobalCanvas=nt,e.BackendContext=me,e.Matrix=w,e.RenderCanvas=Ee,(e=>{e.traceImage=function(e,t){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d"),i=new ImageData(new Uint8ClampedArray(t),r.width,r.height);n.putImageData(i,0,0),document.body.appendChild(r)},e.registerSoftwareDecoderFactory=function(t=null){e._registerSoftwareDecoderFactory(t)},e.SDKVersion=function(){return e._SDKVersion()},e.isIPhone=()=>ee})(e),e.tgfx=((e,t)=>{for(var r in t||(t={}))vt.call(t,r)&&wt(e,r,t[r]);if(gt)for(var r of gt(t))yt.call(t,r)&&wt(e,r,t[r]);return e})({},mt)};var bt,Et=(bt="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,r,n=void 0!==(e=e||{})?e:{};n.ready=new Promise((function(e,n){t=e,r=n})),["___getTypeName","__embind_initialize_bindings","_fflush","onRuntimeInitialized"].forEach((e=>{Object.getOwnPropertyDescriptor(n.ready,e)||Object.defineProperty(n.ready,e,{get:()=>oe("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>oe("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));var i=Object.assign({},n),a=(e,t)=>{throw t},o="object"==typeof window,s="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,c=!o&&!l&&!s;if(n.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var u,d,f,h="";if(c){if("object"==typeof process&&"function"==typeof require||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");"undefined"!=typeof read&&(u=function(e){return read(e)}),f=function(e){let t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),I("object"==typeof t),t)},d=function(e,t,r){setTimeout((()=>t(f(e))),0)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(a=(e,t)=>{!function(e){if(e instanceof pe)return;let t=e;e&&"object"==typeof e&&e.stack&&(t=[e,e.stack]),g("exiting due to exception: "+t)}(t),quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)}else{if(!o&&!s)throw new Error("environment detection error");if(s?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),bt&&(h=bt),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},s&&(f=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}}var m,p=n.print||console.log.bind(console),g=n.printErr||console.warn.bind(console);Object.assign(n,i),i=null,m="fetchSettings",Object.getOwnPropertyDescriptor(n,m)&&oe("`Module."+m+"` was supplied but `"+m+"` not included in INCOMING_MODULE_JS_API"),n.arguments&&n.arguments,_("arguments","arguments_"),n.thisProgram&&n.thisProgram,_("thisProgram","thisProgram"),n.quit&&(a=n.quit),_("quit","quit_"),I(void 0===n.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),I(void 0===n.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),I(void 0===n.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),I(void 0===n.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),I(void 0===n.read,"Module.read option was removed (modify read_ in JS)"),I(void 0===n.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),I(void 0===n.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),I(void 0===n.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),I(void 0===n.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),_("read","read_"),_("readAsync","readAsync"),_("readBinary","readBinary"),_("setWindowTitle","setWindowTitle"),I(!l,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),I(!c,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");var v,y,w=4;function _(e,t){Object.getOwnPropertyDescriptor(n,e)||Object.defineProperty(n,e,{configurable:!0,get:function(){oe("Module."+e+" has been replaced with plain "+t+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function b(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function E(e,t){switch(e){case 1:return"i8";case 2:return"i16";case 4:return t?"float":"i32";case 8:return t?"double":"i64";default:I(0)}}function C(e,t,r,n){if(e<=0&&oe("segmentation fault storing "+r+" bytes to address "+e),e%r!=0&&oe("alignment error storing to address "+e+", which was expected to be aligned to a multiple of "+r),Q){var i=Jr()>>>0;e+r>i&&oe("segmentation fault, exceeded the top of the available dynamic heap when storing "+r+" bytes to address "+e+". DYNAMICTOP="+i),I(i>=Xr()),I(i<=F.length)}return function(e,t,r){switch(r){case"i1":case"i8":F[e>>0]=t;break;case"i16":L[e>>1]=t;break;case"i32":O[e>>2]=t;break;case"i64":ue=[t>>>0,(ce=t,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],O[e>>2]=ue[0],O[e+4>>2]=ue[1];break;case"float":N[e>>2]=t;break;case"double":G[e>>3]=t;break;default:oe("invalid type for setValue: "+r)}}(e,t,E(r,n)),t}function T(e,t,r){return C(e,t,r,!0)}function x(e,t,r,n){if(e<=0&&oe("segmentation fault loading "+t+" bytes from address "+e),e%t!=0&&oe("alignment error loading from address "+e+", which was expected to be aligned to a multiple of "+t),Q){var i=Jr()>>>0;e+t>i&&oe("segmentation fault, exceeded the top of the available dynamic heap when loading "+t+" bytes from address "+e+". DYNAMICTOP="+i),I(i>=Xr()),I(i<=F.length)}var a,o,s=E(t,n),l=function(e,t){switch(t){case"i1":case"i8":return F[e>>0];case"i16":return L[e>>1];case"i32":case"i64":return O[e>>2];case"float":return N[e>>2];case"double":return G[e>>3];default:oe("invalid type for getValue: "+t)}}(e,s);return r&&(a=l,o=parseInt(s.substr(1),10),l=a>=0?a:o<=32?2*Math.abs(1<<o-1)+a:Math.pow(2,o)+a),l}function P(e,t,r){return x(e,t,r,!0)}n.wasmBinary&&(v=n.wasmBinary),_("wasmBinary","wasmBinary"),n.noExitRuntime,_("noExitRuntime","noExitRuntime"),"object"!=typeof WebAssembly&&oe("no native wasm support detected");var S,A=!1;function I(e,t){e||oe("Assertion failed"+(t?": "+t:""))}var k,F,D,L,M,O,R,N,G,B="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function j(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&B)return B.decode(e.subarray(t,i));for(var a="";t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|l:(240!=(248&o)&&ye("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(7&o)<<18|s<<12|l<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var c=o-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}function U(e,t){return e?j(D,e,t):""}function V(e,t,r,n){if(!(n>0))return 0;for(var i=r,a=r+n-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(r>=a)break;t[r++]=s}else if(s<=2047){if(r+1>=a)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=a)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=a)break;s>1114111&&ye("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-i}function $(e,t,r){return I("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),V(e,D,t,r)}function W(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t}function H(e){k=e,n.HEAP8=F=new Int8Array(e),n.HEAP16=L=new Int16Array(e),n.HEAP32=O=new Int32Array(e),n.HEAPU8=D=new Uint8Array(e),n.HEAPU16=M=new Uint16Array(e),n.HEAPU32=R=new Uint32Array(e),n.HEAPF32=N=new Float32Array(e),n.HEAPF64=G=new Float64Array(e)}var z=5242880;n.TOTAL_STACK&&I(z===n.TOTAL_STACK,"the stack size can no longer be determined at runtime");var q=n.INITIAL_MEMORY||16777216;function J(){if(!A){var e=Kr(),t=x(4*(e>>2),4,1),r=x(4*(e+4>>2),4,1);34821223==t&&2310721022==r||oe("Stack overflow! Stack cookie has been overwritten at 0x"+e.toString(16)+", expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+r.toString(16)+" 0x"+t.toString(16))}}_("INITIAL_MEMORY","INITIAL_MEMORY"),I(q>=z,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+q+"! (TOTAL_STACK="+z+")"),I("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),I(!n.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),I(16777216==q,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}();var Y=[],X=[],K=[],Q=!1;I(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Z=0,ee=null,te=null,re={};function ne(e){for(var t=e;;){if(!re[e])return e;e=t+Math.random()}}function ie(e){Z++,n.monitorRunDependencies&&n.monitorRunDependencies(Z),e?(I(!re[e]),re[e]=1,null===ee&&"undefined"!=typeof setInterval&&(ee=setInterval((function(){if(A)return clearInterval(ee),void(ee=null);var e=!1;for(var t in re)e||(e=!0,g("still waiting on run dependencies:")),g("dependency: "+t);e&&g("(end of list)")}),1e4))):g("warning: run dependency added without ID")}function ae(e){if(Z--,n.monitorRunDependencies&&n.monitorRunDependencies(Z),e?(I(re[e]),delete re[e]):g("warning: run dependency removed without ID"),0==Z&&(null!==ee&&(clearInterval(ee),ee=null),te)){var t=te;te=null,t()}}function oe(e){n.onAbort&&n.onAbort(e),g(e="Aborted("+e+")"),A=!0,S=1;var t=new WebAssembly.RuntimeError(e);throw r(t),t}var se,le,ce,ue,de="data:application/octet-stream;base64,";function fe(e){return e.startsWith(de)}function he(e,t){return function(){var r=e,i=t;return t||(i=n.asm),I(Q,"native function `"+r+"` called before runtime initialization"),i[e]||I(i[e],"exported native function `"+r+"` not found"),i[e].apply(null,arguments)}}function me(e){try{if(e==se&&v)return new Uint8Array(v);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(e){oe(e)}}function pe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ge(e){for(;e.length>0;)e.shift()(n)}function ve(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){var t,r=(t=e,ye("warning: build with -sDEMANGLE_SUPPORT to link in libcxxabi demangling"),t);return e===r?e:r+" ["+e+"]"}))}function ye(e){ye.shown||(ye.shown={}),ye.shown[e]||(ye.shown[e]=1,g(e))}function we(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){C(4*(this.ptr+4>>2),e,4)},this.get_type=function(){return x(4*(this.ptr+4>>2),4,1)},this.set_destructor=function(e){C(4*(this.ptr+8>>2),e,4)},this.get_destructor=function(){return x(4*(this.ptr+8>>2),4,1)},this.set_refcount=function(e){C(4*(this.ptr>>2),e,4)},this.set_caught=function(e){e=e?1:0,C(this.ptr+12>>0,e,1)},this.get_caught=function(){return 0!=x(this.ptr+12>>0,1,0)},this.set_rethrown=function(e){e=e?1:0,C(this.ptr+13>>0,e,1)},this.get_rethrown=function(){return 0!=x(this.ptr+13>>0,1,0)},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=x(4*(this.ptr>>2),4,0);C(4*(this.ptr>>2),e+1,4)},this.release_ref=function(){var e=x(4*(this.ptr>>2),4,0);return C(4*(this.ptr>>2),e-1,4),I(e>0),1===e},this.set_adjusted_ptr=function(e){C(4*(this.ptr+16>>2),e,4)},this.get_adjusted_ptr=function(){return x(4*(this.ptr+16>>2),4,1)},this.get_exception_ptr=function(){if(Qr(this.get_type()))return x(4*(this.excPtr>>2),4,1);var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}fe(se="libpag.wasm")||(le=se,se=n.locateFile?n.locateFile(le,h):h+le);var _e={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=_e.isAbs(e),r="/"===e.substr(-1);return(e=_e.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=_e.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=_e.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return _e.normalize(e.join("/"))},join2:(e,t)=>_e.normalize(e+"/"+t)},be={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:Ae.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t=_e.isAbs(n)}return(t?"/":"")+(e=_e.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=be.resolve(e).substr(1),t=be.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),a=Math.min(n.length,i.length),o=a,s=0;s<a;s++)if(n[s]!==i[s]){o=s;break}var l=[];for(s=o;s<n.length;s++)l.push("..");return(l=l.concat(i.slice(o))).join("/")}};function Ee(e,t,r){var n=r>0?r:W(e)+1,i=new Array(n),a=V(e,i,0,i.length);return t&&(i.length=a),i}var Ce={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Ce.ttys[e]={input:[],output:[],ops:t},Ae.registerDevice(e,Ce.stream_ops)},stream_ops:{open:function(e){var t=Ce.ttys[e.node.rdev];if(!t)throw new Ae.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.get_char)throw new Ae.ErrnoError(60);for(var a=0,o=0;o<n;o++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new Ae.ErrnoError(29)}if(void 0===s&&0===a)throw new Ae.ErrnoError(6);if(null==s)break;a++,t[r+o]=s}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.put_char)throw new Ae.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,t[r+a])}catch(e){throw new Ae.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=Ee(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(p(j(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(p(j(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(g(j(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(g(j(e.output,0)),e.output=[])}}};function Te(e){oe("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")}var xe={ops_table:null,mount:function(e){return xe.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(Ae.isBlkdev(r)||Ae.isFIFO(r))throw new Ae.ErrnoError(63);xe.ops_table||(xe.ops_table={dir:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr,lookup:xe.node_ops.lookup,mknod:xe.node_ops.mknod,rename:xe.node_ops.rename,unlink:xe.node_ops.unlink,rmdir:xe.node_ops.rmdir,readdir:xe.node_ops.readdir,symlink:xe.node_ops.symlink},stream:{llseek:xe.stream_ops.llseek}},file:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr},stream:{llseek:xe.stream_ops.llseek,read:xe.stream_ops.read,write:xe.stream_ops.write,allocate:xe.stream_ops.allocate,mmap:xe.stream_ops.mmap,msync:xe.stream_ops.msync}},link:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr,readlink:xe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr},stream:Ae.chrdev_stream_ops}});var i=Ae.createNode(e,t,r,n);return Ae.isDir(i.mode)?(i.node_ops=xe.ops_table.dir.node,i.stream_ops=xe.ops_table.dir.stream,i.contents={}):Ae.isFile(i.mode)?(i.node_ops=xe.ops_table.file.node,i.stream_ops=xe.ops_table.file.stream,i.usedBytes=0,i.contents=null):Ae.isLink(i.mode)?(i.node_ops=xe.ops_table.link.node,i.stream_ops=xe.ops_table.link.stream):Ae.isChrdev(i.mode)&&(i.node_ops=xe.ops_table.chrdev.node,i.stream_ops=xe.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Ae.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ae.isDir(e.mode)?t.size=4096:Ae.isFile(e.mode)?t.size=e.usedBytes:Ae.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&xe.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Ae.genericErrors[44]},mknod:function(e,t,r,n){return xe.createNode(e,t,r,n)},rename:function(e,t,r){if(Ae.isDir(e.mode)){var n;try{n=Ae.lookupNode(t,r)}catch(e){}if(n)for(var i in n.contents)throw new Ae.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=Ae.lookupNode(e,t);for(var n in r.contents)throw new Ae.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=xe.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!Ae.isLink(e.mode))throw new Ae.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,n);if(I(o>=0),o>8&&a.subarray)t.set(a.subarray(i,i+o),r);else for(var s=0;s<o;s++)t[r+s]=a[i+s];return o},write:function(e,t,r,n,i,a){if(I(!(t instanceof ArrayBuffer)),t.buffer===F.buffer&&(a=!1),!n)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(a)return I(0===i,"canOwn must imply no weird position inside the file"),o.contents=t.subarray(r,r+n),o.usedBytes=n,n;if(0===o.usedBytes&&0===i)return o.contents=t.slice(r,r+n),o.usedBytes=n,n;if(i+n<=o.usedBytes)return o.contents.set(t.subarray(r,r+n),i),n}if(xe.expandFileStorage(o,i+n),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)o.contents[i+s]=t[r+s];return o.usedBytes=Math.max(o.usedBytes,i+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&Ae.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new Ae.ErrnoError(28);return n},allocate:function(e,t,r){xe.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,i){if(!Ae.isFile(e.node.mode))throw new Ae.ErrnoError(43);var a,o,s=e.node.contents;if(2&i||s.buffer!==k){if((r>0||r+t<s.length)&&(s=s.subarray?s.subarray(r,r+t):Array.prototype.slice.call(s,r,r+t)),o=!0,!(a=Te()))throw new Ae.ErrnoError(48);F.set(s,a)}else o=!1,a=s.byteOffset;return{ptr:a,allocated:o}},msync:function(e,t,r,n,i){if(!Ae.isFile(e.node.mode))throw new Ae.ErrnoError(43);return 2&i||xe.stream_ops.write(e,t,0,n,r,!1),0}}},Pe={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},Se={},Ae={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=be.resolve(Ae.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Ae.ErrnoError(32);for(var r=_e.normalizeArray(e.split("/").filter((e=>!!e)),!1),n=Ae.root,i="/",a=0;a<r.length;a++){var o=a===r.length-1;if(o&&t.parent)break;if(n=Ae.lookupNode(n,r[a]),i=_e.join2(i,r[a]),Ae.isMountpoint(n)&&(!o||o&&t.follow_mount)&&(n=n.mounted.root),!o||t.follow)for(var s=0;Ae.isLink(n.mode);){var l=Ae.readlink(i);if(i=be.resolve(_e.dirname(i),l),n=Ae.lookupPath(i,{recurse_count:t.recurse_count+1}).node,s++>40)throw new Ae.ErrnoError(32)}}return{path:i,node:n}},getPath:e=>{for(var t;;){if(Ae.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%Ae.nameTable.length},hashAddNode:e=>{var t=Ae.hashName(e.parent.id,e.name);e.name_next=Ae.nameTable[t],Ae.nameTable[t]=e},hashRemoveNode:e=>{var t=Ae.hashName(e.parent.id,e.name);if(Ae.nameTable[t]===e)Ae.nameTable[t]=e.name_next;else for(var r=Ae.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:(e,t)=>{var r=Ae.mayLookup(e);if(r)throw new Ae.ErrnoError(r,e);for(var n=Ae.hashName(e.id,t),i=Ae.nameTable[n];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===t)return i}return Ae.lookup(e,t)},createNode:(e,t,r,n)=>{I("object"==typeof e);var i=new Ae.FSNode(e,t,r,n);return Ae.hashAddNode(i),i},destroyNode:e=>{Ae.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=Ae.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Ae.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=Ae.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return Ae.lookupNode(e,t),20}catch(e){}return Ae.nodePermissions(e,"wx")},mayDelete:(e,t,r)=>{var n;try{n=Ae.lookupNode(e,t)}catch(e){return e.errno}var i=Ae.nodePermissions(e,"wx");if(i)return i;if(r){if(!Ae.isDir(n.mode))return 54;if(Ae.isRoot(n)||Ae.getPath(n)===Ae.cwd())return 10}else if(Ae.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?Ae.isLink(e.mode)?32:Ae.isDir(e.mode)&&("r"!==Ae.flagsToPermissionString(t)||512&t)?31:Ae.nodePermissions(e,Ae.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=Ae.MAX_OPEN_FDS)=>{for(var r=e;r<=t;r++)if(!Ae.streams[r])return r;throw new Ae.ErrnoError(33)},getStream:e=>Ae.streams[e],createStream:(e,t,r)=>{Ae.FSStream||(Ae.FSStream=function(){this.shared={}},Ae.FSStream.prototype={},Object.defineProperties(Ae.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new Ae.FSStream,e);var n=Ae.nextfd(t,r);return e.fd=n,Ae.streams[n]=e,e},closeStream:e=>{Ae.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=Ae.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new Ae.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{Ae.devices[e]={stream_ops:t}},getDevice:e=>Ae.devices[e],getMounts:e=>{for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),Ae.syncFSRequests++,Ae.syncFSRequests>1&&g("warning: "+Ae.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=Ae.getMounts(Ae.root.mount),n=0;function i(e){return I(Ae.syncFSRequests>0),Ae.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++n>=r.length&&i(null)}r.forEach((t=>{if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount:(e,t,r)=>{if("string"==typeof e)throw e;var n,i="/"===r,a=!r;if(i&&Ae.root)throw new Ae.ErrnoError(10);if(!i&&!a){var o=Ae.lookupPath(r,{follow_mount:!1});if(r=o.path,n=o.node,Ae.isMountpoint(n))throw new Ae.ErrnoError(10);if(!Ae.isDir(n.mode))throw new Ae.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},l=e.mount(s);return l.mount=s,s.root=l,i?Ae.root=l:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),l},unmount:e=>{var t=Ae.lookupPath(e,{follow_mount:!1});if(!Ae.isMountpoint(t.node))throw new Ae.ErrnoError(28);var r=t.node,n=r.mounted,i=Ae.getMounts(n);Object.keys(Ae.nameTable).forEach((e=>{for(var t=Ae.nameTable[e];t;){var r=t.name_next;i.includes(t.mount)&&Ae.destroyNode(t),t=r}})),r.mounted=null;var a=r.mount.mounts.indexOf(n);I(-1!==a),r.mount.mounts.splice(a,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,r)=>{var n=Ae.lookupPath(e,{parent:!0}).node,i=_e.basename(e);if(!i||"."===i||".."===i)throw new Ae.ErrnoError(28);var a=Ae.mayCreate(n,i);if(a)throw new Ae.ErrnoError(a);if(!n.node_ops.mknod)throw new Ae.ErrnoError(63);return n.node_ops.mknod(n,i,t,r)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Ae.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Ae.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var r=e.split("/"),n="",i=0;i<r.length;++i)if(r[i]){n+="/"+r[i];try{Ae.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,Ae.mknod(e,t,r)),symlink:(e,t)=>{if(!be.resolve(e))throw new Ae.ErrnoError(44);var r=Ae.lookupPath(t,{parent:!0}).node;if(!r)throw new Ae.ErrnoError(44);var n=_e.basename(t),i=Ae.mayCreate(r,n);if(i)throw new Ae.ErrnoError(i);if(!r.node_ops.symlink)throw new Ae.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:(e,t)=>{var r,n,i=_e.dirname(e),a=_e.dirname(t),o=_e.basename(e),s=_e.basename(t);if(r=Ae.lookupPath(e,{parent:!0}).node,n=Ae.lookupPath(t,{parent:!0}).node,!r||!n)throw new Ae.ErrnoError(44);if(r.mount!==n.mount)throw new Ae.ErrnoError(75);var l,c=Ae.lookupNode(r,o),u=be.relative(e,a);if("."!==u.charAt(0))throw new Ae.ErrnoError(28);if("."!==(u=be.relative(t,i)).charAt(0))throw new Ae.ErrnoError(55);try{l=Ae.lookupNode(n,s)}catch(e){}if(c!==l){var d=Ae.isDir(c.mode),f=Ae.mayDelete(r,o,d);if(f)throw new Ae.ErrnoError(f);if(f=l?Ae.mayDelete(n,s,d):Ae.mayCreate(n,s))throw new Ae.ErrnoError(f);if(!r.node_ops.rename)throw new Ae.ErrnoError(63);if(Ae.isMountpoint(c)||l&&Ae.isMountpoint(l))throw new Ae.ErrnoError(10);if(n!==r&&(f=Ae.nodePermissions(r,"w")))throw new Ae.ErrnoError(f);Ae.hashRemoveNode(c);try{r.node_ops.rename(c,n,s)}catch(e){throw e}finally{Ae.hashAddNode(c)}}},rmdir:e=>{var t=Ae.lookupPath(e,{parent:!0}).node,r=_e.basename(e),n=Ae.lookupNode(t,r),i=Ae.mayDelete(t,r,!0);if(i)throw new Ae.ErrnoError(i);if(!t.node_ops.rmdir)throw new Ae.ErrnoError(63);if(Ae.isMountpoint(n))throw new Ae.ErrnoError(10);t.node_ops.rmdir(t,r),Ae.destroyNode(n)},readdir:e=>{var t=Ae.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Ae.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=Ae.lookupPath(e,{parent:!0}).node;if(!t)throw new Ae.ErrnoError(44);var r=_e.basename(e),n=Ae.lookupNode(t,r),i=Ae.mayDelete(t,r,!1);if(i)throw new Ae.ErrnoError(i);if(!t.node_ops.unlink)throw new Ae.ErrnoError(63);if(Ae.isMountpoint(n))throw new Ae.ErrnoError(10);t.node_ops.unlink(t,r),Ae.destroyNode(n)},readlink:e=>{var t=Ae.lookupPath(e).node;if(!t)throw new Ae.ErrnoError(44);if(!t.node_ops.readlink)throw new Ae.ErrnoError(28);return be.resolve(Ae.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var r=Ae.lookupPath(e,{follow:!t}).node;if(!r)throw new Ae.ErrnoError(44);if(!r.node_ops.getattr)throw new Ae.ErrnoError(63);return r.node_ops.getattr(r)},lstat:e=>Ae.stat(e,!0),chmod:(e,t,r)=>{var n;if(!(n="string"==typeof e?Ae.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Ae.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:(e,t)=>{Ae.chmod(e,t,!0)},fchmod:(e,t)=>{var r=Ae.getStream(e);if(!r)throw new Ae.ErrnoError(8);Ae.chmod(r.node,t)},chown:(e,t,r,n)=>{var i;if(!(i="string"==typeof e?Ae.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Ae.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,r)=>{Ae.chown(e,t,r,!0)},fchown:(e,t,r)=>{var n=Ae.getStream(e);if(!n)throw new Ae.ErrnoError(8);Ae.chown(n.node,t,r)},truncate:(e,t)=>{if(t<0)throw new Ae.ErrnoError(28);var r;if(!(r="string"==typeof e?Ae.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Ae.ErrnoError(63);if(Ae.isDir(r.mode))throw new Ae.ErrnoError(31);if(!Ae.isFile(r.mode))throw new Ae.ErrnoError(28);var n=Ae.nodePermissions(r,"w");if(n)throw new Ae.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var r=Ae.getStream(e);if(!r)throw new Ae.ErrnoError(8);if(0==(2097155&r.flags))throw new Ae.ErrnoError(28);Ae.truncate(r.node,t)},utime:(e,t,r)=>{var n=Ae.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:(e,t,r)=>{if(""===e)throw new Ae.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?Ae.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)i=e;else{e=_e.normalize(e);try{i=Ae.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var a=!1;if(64&t)if(i){if(128&t)throw new Ae.ErrnoError(20)}else i=Ae.mknod(e,r,0),a=!0;if(!i)throw new Ae.ErrnoError(44);if(Ae.isChrdev(i.mode)&&(t&=-513),65536&t&&!Ae.isDir(i.mode))throw new Ae.ErrnoError(54);if(!a){var o=Ae.mayOpen(i,t);if(o)throw new Ae.ErrnoError(o)}512&t&&!a&&Ae.truncate(i,0),t&=-131713;var s=Ae.createStream({node:i,path:Ae.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!n.logReadFiles||1&t||(Ae.readFiles||(Ae.readFiles={}),e in Ae.readFiles||(Ae.readFiles[e]=1)),s},close:e=>{if(Ae.isClosed(e))throw new Ae.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Ae.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,r)=>{if(Ae.isClosed(e))throw new Ae.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Ae.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new Ae.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:(e,t,r,n,i)=>{if(n<0||i<0)throw new Ae.ErrnoError(28);if(Ae.isClosed(e))throw new Ae.ErrnoError(8);if(1==(2097155&e.flags))throw new Ae.ErrnoError(8);if(Ae.isDir(e.node.mode))throw new Ae.ErrnoError(31);if(!e.stream_ops.read)throw new Ae.ErrnoError(28);var a=void 0!==i;if(a){if(!e.seekable)throw new Ae.ErrnoError(70)}else i=e.position;var o=e.stream_ops.read(e,t,r,n,i);return a||(e.position+=o),o},write:(e,t,r,n,i,a)=>{if(n<0||i<0)throw new Ae.ErrnoError(28);if(Ae.isClosed(e))throw new Ae.ErrnoError(8);if(0==(2097155&e.flags))throw new Ae.ErrnoError(8);if(Ae.isDir(e.node.mode))throw new Ae.ErrnoError(31);if(!e.stream_ops.write)throw new Ae.ErrnoError(28);e.seekable&&1024&e.flags&&Ae.llseek(e,0,2);var o=void 0!==i;if(o){if(!e.seekable)throw new Ae.ErrnoError(70)}else i=e.position;var s=e.stream_ops.write(e,t,r,n,i,a);return o||(e.position+=s),s},allocate:(e,t,r)=>{if(Ae.isClosed(e))throw new Ae.ErrnoError(8);if(t<0||r<=0)throw new Ae.ErrnoError(28);if(0==(2097155&e.flags))throw new Ae.ErrnoError(8);if(!Ae.isFile(e.node.mode)&&!Ae.isDir(e.node.mode))throw new Ae.ErrnoError(43);if(!e.stream_ops.allocate)throw new Ae.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:(e,t,r,n,i)=>{if(0!=(2&n)&&0==(2&i)&&2!=(2097155&e.flags))throw new Ae.ErrnoError(2);if(1==(2097155&e.flags))throw new Ae.ErrnoError(2);if(!e.stream_ops.mmap)throw new Ae.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,i)},msync:(e,t,r,n,i)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,i):0,munmap:e=>0,ioctl:(e,t,r)=>{if(!e.stream_ops.ioctl)throw new Ae.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=Ae.open(e,t.flags),i=Ae.stat(e).size,a=new Uint8Array(i);return Ae.read(n,a,0,i,0),"utf8"===t.encoding?r=j(a,0):"binary"===t.encoding&&(r=a),Ae.close(n),r},writeFile:(e,t,r={})=>{r.flags=r.flags||577;var n=Ae.open(e,r.flags,r.mode);if("string"==typeof t){var i=new Uint8Array(W(t)+1),a=V(t,i,0,i.length);Ae.write(n,i,0,a,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Ae.write(n,t,0,t.byteLength,void 0,r.canOwn)}Ae.close(n)},cwd:()=>Ae.currentPath,chdir:e=>{var t=Ae.lookupPath(e,{follow:!0});if(null===t.node)throw new Ae.ErrnoError(44);if(!Ae.isDir(t.node.mode))throw new Ae.ErrnoError(54);var r=Ae.nodePermissions(t.node,"x");if(r)throw new Ae.ErrnoError(r);Ae.currentPath=t.path},createDefaultDirectories:()=>{Ae.mkdir("/tmp"),Ae.mkdir("/home"),Ae.mkdir("/home/web_user")},createDefaultDevices:()=>{Ae.mkdir("/dev"),Ae.registerDevice(Ae.makedev(1,3),{read:()=>0,write:(e,t,r,n,i)=>n}),Ae.mkdev("/dev/null",Ae.makedev(1,3)),Ce.register(Ae.makedev(5,0),Ce.default_tty_ops),Ce.register(Ae.makedev(6,0),Ce.default_tty1_ops),Ae.mkdev("/dev/tty",Ae.makedev(5,0)),Ae.mkdev("/dev/tty1",Ae.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>oe("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}();Ae.createDevice("/dev","random",e),Ae.createDevice("/dev","urandom",e),Ae.mkdir("/dev/shm"),Ae.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{Ae.mkdir("/proc");var e=Ae.mkdir("/proc/self");Ae.mkdir("/proc/self/fd"),Ae.mount({mount:()=>{var t=Ae.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var r=+t,n=Ae.getStream(r);if(!n)throw new Ae.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{n.stdin?Ae.createDevice("/dev","stdin",n.stdin):Ae.symlink("/dev/tty","/dev/stdin"),n.stdout?Ae.createDevice("/dev","stdout",null,n.stdout):Ae.symlink("/dev/tty","/dev/stdout"),n.stderr?Ae.createDevice("/dev","stderr",null,n.stderr):Ae.symlink("/dev/tty1","/dev/stderr");var e=Ae.open("/dev/stdin",0),t=Ae.open("/dev/stdout",1),r=Ae.open("/dev/stderr",1);I(0===e.fd,"invalid handle for stdin ("+e.fd+")"),I(1===t.fd,"invalid handle for stdout ("+t.fd+")"),I(2===r.fd,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:()=>{Ae.ErrnoError||(Ae.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,Se)if(Se[t]===e){this.code=t;break}},this.setErrno(e),this.message=Pe[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=ve(this.stack))},Ae.ErrnoError.prototype=new Error,Ae.ErrnoError.prototype.constructor=Ae.ErrnoError,[44].forEach((e=>{Ae.genericErrors[e]=new Ae.ErrnoError(e),Ae.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{Ae.ensureErrnoError(),Ae.nameTable=new Array(4096),Ae.mount(xe,{},"/"),Ae.createDefaultDirectories(),Ae.createDefaultDevices(),Ae.createSpecialDirectories(),Ae.filesystems={MEMFS:xe}},init:(e,t,r)=>{I(!Ae.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Ae.init.initialized=!0,Ae.ensureErrnoError(),n.stdin=e||n.stdin,n.stdout=t||n.stdout,n.stderr=r||n.stderr,Ae.createStandardStreams()},quit:()=>{Ae.init.initialized=!1,qr(0);for(var e=0;e<Ae.streams.length;e++){var t=Ae.streams[e];t&&Ae.close(t)}},getMode:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:(e,t)=>{var r=Ae.analyzePath(e,t);return r.exists?r.object:null},analyzePath:(e,t)=>{try{e=(n=Ae.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=Ae.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=_e.basename(e),n=Ae.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath:(e,t,r,n)=>{e="string"==typeof e?e:Ae.getPath(e);for(var i=t.split("/").reverse();i.length;){var a=i.pop();if(a){var o=_e.join2(e,a);try{Ae.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,r,n,i)=>{var a=_e.join2("string"==typeof e?e:Ae.getPath(e),t),o=Ae.getMode(n,i);return Ae.create(a,o)},createDataFile:(e,t,r,n,i,a)=>{var o=t;e&&(e="string"==typeof e?e:Ae.getPath(e),o=t?_e.join2(e,t):e);var s=Ae.getMode(n,i),l=Ae.create(o,s);if(r){if("string"==typeof r){for(var c=new Array(r.length),u=0,d=r.length;u<d;++u)c[u]=r.charCodeAt(u);r=c}Ae.chmod(l,146|s);var f=Ae.open(l,577);Ae.write(f,r,0,r.length,0,a),Ae.close(f),Ae.chmod(l,s)}return l},createDevice:(e,t,r,n)=>{var i=_e.join2("string"==typeof e?e:Ae.getPath(e),t),a=Ae.getMode(!!r,!!n);Ae.createDevice.major||(Ae.createDevice.major=64);var o=Ae.makedev(Ae.createDevice.major++,0);return Ae.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,t,n,i,a)=>{for(var o=0,s=0;s<i;s++){var l;try{l=r()}catch(e){throw new Ae.ErrnoError(29)}if(void 0===l&&0===o)throw new Ae.ErrnoError(6);if(null==l)break;o++,t[n+s]=l}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,r,i,a)=>{for(var o=0;o<i;o++)try{n(t[r+o])}catch(e){throw new Ae.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),Ae.mkdev(i,a,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!u)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Ee(u(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Ae.ErrnoError(29)}},createLazyFile:(e,t,r,n,i)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;i||(o=n);var s=this;s.setDataGetter((e=>{var t=e*o,i=(e+1)*o-1;if(i=Math.min(i,n-1),void 0===s.chunks[e]&&(s.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",r,!1),n!==o&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+r+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Ee(i.responseText||"",!0)})(t,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!a&&n||(o=n=1,n=this.getter(0).length,o=n,p("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!s)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new a;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:o}}else l={isDevice:!1,url:r};var c=Ae.createFile(e,t,l,n,i);l.contents?c.contents=l.contents:l.url&&(c.contents=null,c.url=l.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var u={};function d(e,t,r,n,i){var a=e.node.contents;if(i>=a.length)return 0;var o=Math.min(a.length-i,n);if(I(o>=0),a.slice)for(var s=0;s<o;s++)t[r+s]=a[i+s];else for(s=0;s<o;s++)t[r+s]=a.get(i+s);return o}return Object.keys(c.stream_ops).forEach((e=>{var t=c.stream_ops[e];u[e]=function(){return Ae.forceLoadFile(c),t.apply(null,arguments)}})),u.read=(e,t,r,n,i)=>(Ae.forceLoadFile(c),d(e,t,r,n,i)),u.mmap=(e,t,r,n,i)=>{Ae.forceLoadFile(c);var a=Te();if(!a)throw new Ae.ErrnoError(48);return d(e,F,a,t,r),{ptr:a,allocated:!0}},c.stream_ops=u,c},createPreloadedFile:(e,t,r,n,i,a,o,s,l,c)=>{var u=t?be.resolve(_e.join2(e,t)):e,f=ne("cp "+u);function h(r){function d(r){c&&c(),s||Ae.createDataFile(e,t,r,n,i,l),a&&a(),ae(f)}Browser.handledByPreloadPlugin(r,u,d,(()=>{o&&o(),ae(f)}))||d(r)}ie(f),"string"==typeof r?function(e,t,r,n){var i=n?"":ne("al "+e);d(e,(r=>{I(r,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(r)),i&&ae(i)}),(t=>{if(!r)throw'Loading data file "'+e+'" failed.';r()})),i&&ie(i)}(r,(e=>h(e)),o):h(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=Ae.indexedDB();try{var i=n.open(Ae.DB_NAME(),Ae.DB_VERSION)}catch(e){return r(e)}i.onupgradeneeded=()=>{p("creating db"),i.result.createObjectStore(Ae.DB_STORE_NAME)},i.onsuccess=()=>{var n=i.result.transaction([Ae.DB_STORE_NAME],"readwrite"),a=n.objectStore(Ae.DB_STORE_NAME),o=0,s=0,l=e.length;function c(){0==s?t():r()}e.forEach((e=>{var t=a.put(Ae.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+s==l&&c()},t.onerror=()=>{s++,o+s==l&&c()}})),n.onerror=r},i.onerror=r},loadFilesFromDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=Ae.indexedDB();try{var i=n.open(Ae.DB_NAME(),Ae.DB_VERSION)}catch(e){return r(e)}i.onupgradeneeded=r,i.onsuccess=()=>{var n=i.result;try{var a=n.transaction([Ae.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var o=a.objectStore(Ae.DB_STORE_NAME),s=0,l=0,c=e.length;function u(){0==l?t():r()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{Ae.analyzePath(e).exists&&Ae.unlink(e),Ae.createDataFile(_e.dirname(e),_e.basename(e),t.result,!0,!0,!0),++s+l==c&&u()},t.onerror=()=>{l++,s+l==c&&u()}})),a.onerror=r},i.onerror=r},absolutePath:()=>{oe("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:()=>{oe("FS.createFolder has been removed; use FS.mkdir instead")},createLink:()=>{oe("FS.createLink has been removed; use FS.symlink instead")},joinPath:()=>{oe("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:()=>{oe("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:()=>{oe("FS.standardizePath has been removed; use PATH.normalize instead")}},Ie={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(_e.isAbs(t))return t;var n;if(n=-100===e?Ae.cwd():Ie.getStreamFromFD(e).path,0==t.length){if(!r)throw new Ae.ErrnoError(44);return n}return _e.join2(n,t)},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&_e.normalize(t)!==_e.normalize(Ae.getPath(e.node)))return-54;throw e}return C(4*(r>>2),n.dev,4),C(4*(r+8>>2),n.ino,4),C(4*(r+12>>2),n.mode,4),C(4*(r+16>>2),n.nlink,4),C(4*(r+20>>2),n.uid,4),C(4*(r+24>>2),n.gid,4),C(4*(r+28>>2),n.rdev,4),C(4*(r+40>>2),(ue=[n.size>>>0,(ce=n.size,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)])[0],4),C(4*(r+44>>2),ue[1],4),C(4*(r+48>>2),4096,4),C(4*(r+52>>2),n.blocks,4),C(4*(r+56>>2),(ue=[Math.floor(n.atime.getTime()/1e3)>>>0,(ce=Math.floor(n.atime.getTime()/1e3),+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)])[0],4),C(4*(r+60>>2),ue[1],4),C(4*(r+64>>2),0,4),C(4*(r+72>>2),(ue=[Math.floor(n.mtime.getTime()/1e3)>>>0,(ce=Math.floor(n.mtime.getTime()/1e3),+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)])[0],4),C(4*(r+76>>2),ue[1],4),C(4*(r+80>>2),0,4),C(4*(r+88>>2),(ue=[Math.floor(n.ctime.getTime()/1e3)>>>0,(ce=Math.floor(n.ctime.getTime()/1e3),+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)])[0],4),C(4*(r+92>>2),ue[1],4),C(4*(r+96>>2),0,4),C(4*(r+104>>2),(ue=[n.ino>>>0,(ce=n.ino,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)])[0],4),C(4*(r+108>>2),ue[1],4),0},doMsync:function(e,t,r,n,i){var a=D.slice(e,e+r);Ae.msync(t,a,i,r,n)},varargs:void 0,get:function(){return I(null!=Ie.varargs),Ie.varargs+=4,x(4*(Ie.varargs-4>>2),4,0)},getStr:function(e){return U(e)},getStreamFromFD:function(e){var t=Ae.getStream(e);if(!t)throw new Ae.ErrnoError(8);return t}},ke={};function Fe(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function De(e){return this.fromWireType(x(4*(e>>2),4,0))}var Le={},Me={},Oe={},Re=48,Ne=57;function Ge(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Re&&t<=Ne?"_"+e:e}function Be(e,t){return e=Ge(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function je(e,t){var r=Be(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ue=void 0;function Ve(e){throw new Ue(e)}function $e(e,t,r){function n(t){var n=r(t);n.length!==e.length&&Ve("Mismatched type converter count");for(var i=0;i<e.length;++i)Ye(e[i],n[i])}e.forEach((function(e){Oe[e]=t}));var i=new Array(t.length),a=[],o=0;t.forEach(((e,t)=>{Me.hasOwnProperty(e)?i[t]=Me[e]:(a.push(e),Le.hasOwnProperty(e)||(Le[e]=[]),Le[e].push((()=>{i[t]=Me[e],++o===a.length&&n(i)})))})),0===a.length&&n(i)}function We(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var He=void 0;function ze(e){for(var t="",r=e;x(r,1,1);)t+=He[x(r++,1,1)];return t}var qe=void 0;function Je(e){throw new qe(e)}function Ye(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||Je('type "'+n+'" must have a positive integer typeid pointer'),Me.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;Je("Cannot register type '"+n+"' twice")}if(Me[e]=t,delete Oe[e],Le.hasOwnProperty(e)){var i=Le[e];delete Le[e],i.forEach((e=>e()))}}function Xe(e){if(!(this instanceof yt))return!1;if(!(e instanceof yt))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i}function Ke(e){Je(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Qe=!1;function Ze(e){}function et(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function tt(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=tt(e,t,r.baseClass);return null===n?null:r.downcast(n)}var rt={};function nt(){return Object.keys(ct).length}function it(){var e=[];for(var t in ct)ct.hasOwnProperty(t)&&e.push(ct[t]);return e}var at=[];function ot(){for(;at.length;){var e=at.pop();e.$$.deleteScheduled=!1,e.delete()}}var st=void 0;function lt(e){st=e,at.length&&st&&st(ot)}var ct={};function ut(e,t){return t=function(e,t){for(void 0===t&&Je("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),ct[t]}function dt(e,t){return t.ptrType&&t.ptr||Ve("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Ve("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ht(Object.create(e,{$$:{value:t}}))}function ft(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=ut(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?dt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):dt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,o=this.registeredClass.getActualType(t),s=rt[o];if(!s)return i.call(this);a=this.isConst?s.constPointerType:s.pointerType;var l=tt(t,this.registeredClass,a.registeredClass);return null===l?i.call(this):this.isSmartPointer?dt(a.registeredClass.instancePrototype,{ptrType:a,ptr:l,smartPtrType:this,smartPtr:e}):dt(a.registeredClass.instancePrototype,{ptrType:a,ptr:l})}function ht(e){return"undefined"==typeof FinalizationRegistry?(ht=e=>e,e):(Qe=new FinalizationRegistry((e=>{console.warn(e.leakWarning.stack.replace(/^Error: /,"")),et(e.$$)})),Ze=e=>Qe.unregister(e),(ht=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t},n=t.ptrType.registeredClass;r.leakWarning=new Error("Embind found a leaked C++ instance "+n.name+" <0x"+t.ptr.toString(16)+">.\nWe'll free it automatically in this case, but this functionality is not reliable across various environments.\nMake sure to invoke .delete() manually once you're done with the instance instead.\nOriginally allocated"),"captureStackTrace"in Error&&Error.captureStackTrace(r.leakWarning,ft),Qe.register(e,r,e)}return e})(e))}function mt(){if(this.$$.ptr||Ke(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=ht(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function pt(){this.$$.ptr||Ke(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Je("Object already scheduled for deletion"),Ze(this),et(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function gt(){return!this.$$.ptr}function vt(){return this.$$.ptr||Ke(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Je("Object already scheduled for deletion"),at.push(this),1===at.length&&st&&st(ot),this.$$.deleteScheduled=!0,this}function yt(){}function wt(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Je("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function _t(e,t,r){n.hasOwnProperty(e)?((void 0===r||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[r])&&Je("Cannot register public name '"+e+"' twice"),wt(n,e,e),n.hasOwnProperty(r)&&Je("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),n[e].overloadTable[r]=t):(n[e]=t,void 0!==r&&(n[e].numArguments=r))}function Et(e,t,r,n,i,a,o,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=a,this.upcast=o,this.downcast=s,this.pureVirtualFunctions=[]}function Ct(e,t,r){for(;t!==r;)t.upcast||Je("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Tt(e,t){if(null===t)return this.isReference&&Je("null is not a valid "+this.name),0;t.$$||Je('Cannot pass "'+Qt(t)+'" as a '+this.name),t.$$.ptr||Je("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return Ct(t.$$.ptr,r,this.registeredClass)}function xt(e,t){var r;if(null===t)return this.isReference&&Je("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||Je('Cannot pass "'+Qt(t)+'" as a '+this.name),t.$$.ptr||Je("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Je("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=Ct(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Je("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:Je("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,Yt.toHandle((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:Je("Unsupporting sharing policy")}return r}function Pt(e,t){if(null===t)return this.isReference&&Je("null is not a valid "+this.name),0;t.$$||Je('Cannot pass "'+Qt(t)+'" as a '+this.name),t.$$.ptr||Je("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Je("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return Ct(t.$$.ptr,r,this.registeredClass)}function St(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function At(e){this.rawDestructor&&this.rawDestructor(e)}function It(e){null!==e&&e.delete()}function kt(e,t,r,n,i,a,o,s,l,c,u){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=o,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=xt:n?(this.toWireType=Tt,this.destructorFunction=null):(this.toWireType=Pt,this.destructorFunction=null)}function Ft(e,t,r){n.hasOwnProperty(e)||Ve("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==r?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)}function Dt(e,t,r){return function(e,t,r){I("dynCall_"+e in n,"bad function pointer type - no table for sig '"+e+"'"),r&&r.length?I(r.length===e.substring(1).replace(/j/g,"--").length):I(1==e.length);var i=n["dynCall_"+e];return r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)}(e,t,r)}function Lt(e,t){e=ze(e);var r,n,i,a=(r=e,n=t,i=[],function(){return i.length=0,Object.assign(i,arguments),Dt(r,n,i)});return"function"!=typeof a&&Je("unknown function pointer with signature "+e+": "+t),a}var Mt=void 0;function Ot(e){var t=Hr(e),r=ze(t);return $r(t),r}function Rt(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||Me[t]||(Oe[t]?Oe[t].forEach(e):(r.push(t),n[t]=!0))})),new Mt(e+": "+r.map(Ot).join([", "]))}function Nt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=Be(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return i instanceof Object?i:n}function Gt(e){try{return e()}catch(e){oe(e)}}function Bt(e){if(A)g("user callback triggered after runtime exited or application aborted.  Ignoring.");else try{e()}catch(e){!function(e){if(e instanceof pe||"unwind"==e)return S;a(1,e)}(e)}}var jt={State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:4096,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId:function(e){var t=jt.callStackNameToId[e];return void 0===t&&(t=jt.callStackId++,jt.callStackNameToId[e]=t,jt.callStackIdToName[t]=e),t},instrumentWasmImports:function(e){var t=["env.invoke_*","env.emscripten_sleep","env.emscripten_wget","env.emscripten_wget_data","env.emscripten_idb_load","env.emscripten_idb_store","env.emscripten_idb_delete","env.emscripten_idb_exists","env.emscripten_idb_load_blob","env.emscripten_idb_store_blob","env.SDL_Delay","env.emscripten_scan_registers","env.emscripten_lazy_load_code","env.emscripten_fiber_swap","wasi_snapshot_preview1.fd_sync","env.__wasi_fd_sync","env._emval_await","env._dlopen_js","env.__asyncjs__*"].map((e=>e.split(".")[1]));for(var r in e)!function(r){var n=e[r];if(n.sig,"function"==typeof n){var i=t.indexOf(r)>=0||r.startsWith("__asyncjs__");e[r]=function(){var e=jt.state;try{return n.apply(null,arguments)}finally{var t=e===jt.State.Normal&&jt.state===jt.State.Disabled,a=r.startsWith("invoke_")&&!0;if(jt.state!==e&&!i&&!t&&!a)throw new Error("import "+r+" was not in ASYNCIFY_IMPORTS, but changed the state")}}}}(r)},instrumentWasmExports:function(e){var t={};for(var r in e)!function(r){var n=e[r];t[r]="function"==typeof n?function(){jt.exportCallStack.push(r);try{return n.apply(null,arguments)}finally{A||(I(jt.exportCallStack.pop()===r),jt.maybeStopUnwind())}}:n}(r);return t},maybeStopUnwind:function(){jt.currData&&jt.state===jt.State.Unwinding&&0===jt.exportCallStack.length&&(jt.state=jt.State.Normal,Gt(tn),"undefined"!=typeof Fibers&&Fibers.trampoline())},whenDone:function(){return I(jt.currData,"Tried to wait for an async operation when none is in progress."),I(!jt.asyncPromiseHandlers,"Cannot have multiple async operations in flight at once"),new Promise(((e,t)=>{jt.asyncPromiseHandlers={resolve:e,reject:t}}))},allocateData:function(){var e=Wr(12+jt.StackSize);return jt.setDataHeader(e,e+12,jt.StackSize),jt.setDataRewindFunc(e),e},setDataHeader:function(e,t,r){C(4*(e>>2),t,4),C(4*(e+4>>2),t+r,4)},setDataRewindFunc:function(e){var t=jt.exportCallStack[0];C(4*(e+8>>2),jt.getCallStackId(t),4)},getDataRewindFunc:function(e){var t=x(4*(e+8>>2),4,0),r=jt.callStackIdToName[t];return n.asm[r]},doRewind:function(e){return jt.getDataRewindFunc(e)()},handleSleep:function(e){if(I(jt.state!==jt.State.Disabled,"Asyncify cannot be done during or after the runtime exits"),!A){if(jt.state===jt.State.Normal){var t=!1,r=!1;e((e=>{if(I(!e||"number"==typeof e||"boolean"==typeof e),!A&&(jt.handleSleepReturnValue=e||0,t=!0,r)){I(!jt.exportCallStack.length,"Waking up (starting to rewind) must be done from JS, without compiled code on the stack."),jt.state=jt.State.Rewinding,Gt((()=>rn(jt.currData))),"undefined"!=typeof Browser&&Browser.mainLoop.func&&Browser.mainLoop.resume();var n,i=!1;try{n=jt.doRewind(jt.currData)}catch(e){n=e,i=!0}var a=!1;if(!jt.currData){var o=jt.asyncPromiseHandlers;o&&(jt.asyncPromiseHandlers=null,(i?o.reject:o.resolve)(n),a=!0)}if(i&&!a)throw n}})),r=!0,t||(jt.state=jt.State.Unwinding,jt.currData=jt.allocateData(),"undefined"!=typeof Browser&&Browser.mainLoop.func&&Browser.mainLoop.pause(),Gt((()=>en(jt.currData))))}else jt.state===jt.State.Rewinding?(jt.state=jt.State.Normal,Gt(nn),$r(jt.currData),jt.currData=null,jt.sleepCallbacks.forEach((e=>Bt(e)))):oe("invalid state: "+jt.state);return jt.handleSleepReturnValue}},handleAsync:function(e){return jt.handleSleep((t=>{e().then(t)}))}};function Ut(e,t,r,n,i){var a=t.length;a<2&&Je("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==r,s=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){s=!0;break}var c="void"!==t[0].name,u="",d="";for(l=0;l<a-2;++l)u+=(0!==l?", ":"")+"arg"+l,d+=(0!==l?", ":"")+"arg"+l+"Wired";var f="return function "+Ge(e)+"("+u+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";s&&(f+="var destructors = [];\n");var h=s?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[Je,n,i,Fe,t[0],t[1]];for(o&&(f+="var thisWired = classParam.toWireType("+h+", this);\n"),l=0;l<a-2;++l)f+="var arg"+l+"Wired = argType"+l+".toWireType("+h+", arg"+l+"); // "+t[l+2].name+"\n",m.push("argType"+l),p.push(t[l+2]);if(o&&(d="thisWired"+(d.length>0?", ":"")+d),f+=(c?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",m.push("Asyncify"),p.push(jt),f+="function onDone("+(c?"rv":"")+") {\n",s)f+="runDestructors(destructors);\n";else for(l=o?1:2;l<t.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(f+=g+"_dtor("+g+"); // "+t[l].name+"\n",m.push(g+"_dtor"),p.push(t[l].destructorFunction))}return c&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",f+="return Asyncify.currData ? Asyncify.whenDone().then(onDone) : onDone("+(c?"rv":"")+");\n",f+="}\n",m.push(f),Nt(Function,m).apply(null,p)}function Vt(e,t){for(var r=[],n=0;n<e;n++)r.push(x(4*(t+4*n>>2),4,1));return r}function $t(e,t,r){return e instanceof Object||Je(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||Je(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||Je("cannot call emscripten binding method "+r+" on deleted object"),Ct(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}var Wt=[],Ht=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function zt(e){e>4&&0==--Ht[e].refcount&&(Ht[e]=void 0,Wt.push(e))}function qt(){for(var e=0,t=5;t<Ht.length;++t)void 0!==Ht[t]&&++e;return e}function Jt(){for(var e=5;e<Ht.length;++e)if(void 0!==Ht[e])return Ht[e];return null}var Yt={toValue:e=>(e||Je("Cannot use deleted val. handle = "+e),Ht[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Wt.length?Wt.pop():Ht.length;return Ht[t]={refcount:1,value:e},t}}};function Xt(e,t,r){switch(t){case 0:return function(e){var t=r?F:D;return this.fromWireType(t[e])};case 1:return function(e){var t=r?L:M;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=r?O:R;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Kt(e,t){var r=Me[e];return void 0===r&&Je(t+" has unknown type "+Ot(e)),r}function Qt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Zt(e,t){switch(t){case 2:return function(e){return this.fromWireType(P(4*(e>>2),4,0))};case 3:return function(e){return this.fromWireType(P(8*(e>>3),8,0))};default:throw new TypeError("Unknown float type: "+e)}}function er(e,t,r){switch(t){case 0:return r?function(e){return x(e,1,0)}:function(e){return x(e,1,1)};case 1:return r?function(e){return x(2*(e>>1),2,0)}:function(e){return x(2*(e>>1),2,1)};case 2:return r?function(e){return x(4*(e>>2),4,0)}:function(e){return x(4*(e>>2),4,1)};default:throw new TypeError("Unknown integer type: "+e)}}var tr="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function rr(e,t){I(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var r=e,n=r>>1,i=n+t/2;!(n>=i)&&x(2*n,2,1);)++n;if((r=n<<1)-e>32&&tr)return tr.decode(D.subarray(e,r));for(var a="",o=0;!(o>=t/2);++o){var s=x(2*(e+2*o>>1),2,0);if(0==s)break;a+=String.fromCharCode(s)}return a}function nr(e,t,r){if(I(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),I("number"==typeof r,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<2)return 0;for(var n=t,i=(r-=2)<2*e.length?r/2:e.length,a=0;a<i;++a)C(2*(t>>1),e.charCodeAt(a),2),t+=2;return C(2*(t>>1),0,2),t-n}function ir(e){return 2*e.length}function ar(e,t){I(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var r=0,n="";!(r>=t/4);){var i=x(4*(e+4*r>>2),4,0);if(0==i)break;if(++r,i>=65536){var a=i-65536;n+=String.fromCharCode(55296|a>>10,56320|1023&a)}else n+=String.fromCharCode(i)}return n}function or(e,t,r){if(I(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),I("number"==typeof r,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,i=n+r-4,a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),C(4*(t>>2),o,4),(t+=4)+4>i)break}return C(4*(t>>2),0,4),t-n}function sr(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function lr(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=Kt(x(4*(t+n*w>>2),4,1),"parameter "+n);return r}var cr={};function ur(e){var t=cr[e];return void 0===t?ze(e):t}var dr=[];function fr(){return"object"==typeof globalThis?globalThis:Function("return this")()}var hr,mr=[],pr={},gr={inEventHandler:0,removeAllEventListeners:function(){for(var e=gr.eventHandlers.length-1;e>=0;--e)gr._removeHandler(e);gr.eventHandlers=[],gr.deferredCalls=[]},registerRemoveEventListeners:function(){gr.removeEventListenersRegistered||(gr.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,r){function n(e,t){if(e.length!=t.length)return!1;for(var r in e)if(e[r]!=t[r])return!1;return!0}for(var i in gr.deferredCalls){var a=gr.deferredCalls[i];if(a.targetFunction==e&&n(a.argsList,r))return}gr.deferredCalls.push({targetFunction:e,precedence:t,argsList:r}),gr.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<gr.deferredCalls.length;++t)gr.deferredCalls[t].targetFunction==e&&(gr.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return gr.inEventHandler&&gr.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(gr.canPerformEventHandlerRequests())for(var e=0;e<gr.deferredCalls.length;++e){var t=gr.deferredCalls[e];gr.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var r=0;r<gr.eventHandlers.length;++r)gr.eventHandlers[r].target!=e||t&&t!=gr.eventHandlers[r].eventTypeString||gr._removeHandler(r--)},_removeHandler:function(e){var t=gr.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),gr.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++gr.inEventHandler,gr.currentEventHandler=e,gr.runDeferredCalls(),e.handlerFunc(t),gr.runDeferredCalls(),--gr.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),gr.eventHandlers.push(e),gr.registerRemoveEventListeners();else for(var r=0;r<gr.eventHandlers.length;++r)gr.eventHandlers[r].target==e.target&&gr.eventHandlers[r].eventTypeString==e.eventTypeString&&gr._removeHandler(r--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},vr=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function yr(e){var t;return e=(t=e)>2?U(t):t,vr[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function wr(e){return yr(e)}hr=()=>performance.now();var _r={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){_r.lastError||(_r.lastError=e)},getNewId:function(e){for(var t=_r.counter++,r=e.length;r<t;r++)e[r]=null;return t},getSource:function(e,t,r,n){for(var i="",a=0;a<t;++a){var o=n?x(4*(n+4*a>>2),4,0):-1;i+=U(x(4*(r+4*a>>2),4,0),o<0?void 0:o)}return i},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){let t=function(t,r){var n=e.getContextSafariWebGL2Fixed(t,r);return"webgl"==t==n instanceof WebGLRenderingContext?n:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=t}var r=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return r?_r.registerContext(r,t):0},registerContext:function(e,t){var r=_r.getNewId(_r.contexts),n={handle:r,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),_r.contexts[r]=n,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&_r.initExtensions(n),r},makeContextCurrent:function(e){return _r.currentContext=_r.contexts[e],n.ctx=Dr=_r.currentContext&&_r.currentContext.GLctx,!(e&&!Dr)},getContext:function(e){return _r.contexts[e]},deleteContext:function(e){_r.currentContext===_r.contexts[e]&&(_r.currentContext=null),"object"==typeof gr&&gr.removeAllHandlersOnTarget(_r.contexts[e].GLctx.canvas),_r.contexts[e]&&_r.contexts[e].GLctx.canvas&&(_r.contexts[e].GLctx.canvas.GLctxObject=void 0),_r.contexts[e]=null},initExtensions:function(e){if(e||(e=_r.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,r=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,n,i){t.drawArraysInstancedANGLE(e,r,n,i)},e.drawElementsInstanced=function(e,r,n,i,a){t.drawElementsInstancedANGLE(e,r,n,i,a)})}(r),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(r),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})}(r),(t=r).dibvbi=t.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),function(e){e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")}(r),e.version>=2&&(r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!r.disjointTimerQueryExt)&&(r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query")),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(r),(r.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||r.getExtension(e)}))}}};function br(e,t,r,n){for(var i=0;i<e;i++){var a=Dr[r](),o=a&&_r.getNewId(n);a?(a.name=o,n[o]=a):_r.recordError(1282),C(4*(t+4*i>>2),o,4)}}function Er(e,t){C(4*(e>>2),t,4),C(4*(e+4>>2),(t-x(4*(e>>2),4,1))/4294967296,4);var r=t>=0?function(e){return x(4*(e>>2),4,1)+4294967296*x(4*(e+4>>2),4,1)}(e):function(e){return x(4*(e>>2),4,1)+4294967296*x(4*(e+4>>2),4,0)}(e);r!=t&&ye("writeI53ToI64() out of range: serialized JS Number "+t+" to Wasm heap as bytes lo=0x"+x(4*(e>>2),4,1).toString(16)+", hi=0x"+x(4*(e+4>>2),4,1).toString(16)+", which deserializes back to "+r+" instead!")}function Cr(e){var t=W(e)+1,r=Wr(t);return $(e,r,t),r}function Tr(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function xr(e){return 0==(e-=5120)?F:1==e?D:2==e?L:4==e?O:6==e?N:5==e||28922==e||28520==e||30779==e||30782==e?R:M}function Pr(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Sr(e,t,r,n,i,a){var o=xr(e),s=Pr(o),l=1<<s,c=function(e){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1}(t)*l,u=function(e,t,r,n){var i;return t*(e*r+(i=n)-1&-i)}(r,n,c,_r.unpackAlignment);return o.subarray(i>>s,i+u>>s)}function Ar(e){var t=Dr.currentProgram;if(t){var r=t.uniformLocsById[e];return"number"==typeof r&&(t.uniformLocsById[e]=r=Dr.getUniformLocation(t,t.uniformArrayNamesById[e]+(r>0?"["+r+"]":""))),r}_r.recordError(1282)}var Ir=[],kr=[];function Fr(e){try{return y.grow(e-k.byteLength+65535>>>16),H(y.buffer),1}catch(t){g("emscripten_realloc_buffer: Attempted to grow heap from "+k.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}var Dr,Lr=["default","low-power","high-performance"],Mr=function(e,t){I(t);var r=t>>2,n=x(4*(r+6),4,0),i={alpha:!!x(4*(r+0),4,0),depth:!!x(4*(r+1),4,0),stencil:!!x(4*(r+2),4,0),antialias:!!x(4*(r+3),4,0),premultipliedAlpha:!!x(4*(r+4),4,0),preserveDrawingBuffer:!!x(4*(r+5),4,0),powerPreference:Lr[n],failIfMajorPerformanceCaveat:!!x(4*(r+7),4,0),majorVersion:x(4*(r+8),4,0),minorVersion:x(4*(r+9),4,0),enableExtensionsByDefault:x(4*(r+10),4,0),explicitSwapControl:x(4*(r+11),4,0),proxyContextToMainThread:x(4*(r+12),4,0),renderViaOffscreenBackBuffer:x(4*(r+13),4,0)},a=wr(e);return a?i.explicitSwapControl?0:_r.createContext(a,i):0},Or=function(){return _r.currentContext?_r.currentContext.handle:0},Rr=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Ae.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},Nr=365,Gr=146;Object.defineProperties(Rr.prototype,{read:{get:function(){return(this.mode&Nr)===Nr},set:function(e){e?this.mode|=Nr:this.mode&=-366}},write:{get:function(){return(this.mode&Gr)===Gr},set:function(e){e?this.mode|=Gr:this.mode&=-147}},isFolder:{get:function(){return Ae.isDir(this.mode)}},isDevice:{get:function(){return Ae.isChrdev(this.mode)}}}),Ae.FSNode=Rr,Ae.staticInit(),Se={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Ue=n.InternalError=je(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);He=e}(),qe=n.BindingError=je(Error,"BindingError"),yt.prototype.isAliasOf=Xe,yt.prototype.clone=mt,yt.prototype.delete=pt,yt.prototype.isDeleted=gt,yt.prototype.deleteLater=vt,n.getInheritedInstanceCount=nt,n.getLiveInheritedInstances=it,n.flushPendingDeletes=ot,n.setDelayFunction=lt,kt.prototype.getPointee=St,kt.prototype.destructor=At,kt.prototype.argPackAdvance=8,kt.prototype.readValueFromPointer=De,kt.prototype.deleteObject=It,kt.prototype.fromWireType=ft,Mt=n.UnboundTypeError=je(Error,"UnboundTypeError"),n.count_emval_handles=qt,n.get_first_emval=Jt;for(var Br=new Float32Array(288),jr=0;jr<288;++jr)Ir[jr]=Br.subarray(0,jr+1);var Ur=new Int32Array(288);for(jr=0;jr<288;++jr)kr[jr]=Ur.subarray(0,jr+1);var Vr={__assert_fail:function(e,t,r,n){oe("Assertion failed: "+U(e)+", at: "+[t?U(t):"unknown filename",r,n?U(n):"unknown function"])},__cxa_allocate_exception:function(e){return Wr(e+24)+24},__cxa_throw:function(e,t,r){throw new we(e).init(t,r),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -sNO_DISABLE_EXCEPTION_CATCHING or -sEXCEPTION_CATCHING_ALLOWED=[..] to catch."},__syscall_fcntl64:function(e,t,r){Ie.varargs=r;try{var n=Ie.getStreamFromFD(e);switch(t){case 0:return(i=Ie.get())<0?-28:Ae.createStream(n,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var i=Ie.get();return n.flags|=i,0;case 5:return C(2*((i=Ie.get())+0>>1),2,2),0;case 16:case 8:default:return-28;case 9:return a=28,C(4*(zr()>>2),a,4),-1}}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return-e.errno}var a},__syscall_ioctl:function(e,t,r){Ie.varargs=r;try{var n=Ie.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return n.tty?0:-59;case 21519:return n.tty?(C(4*((i=Ie.get())>>2),0,4),0):-59;case 21520:return n.tty?-28:-59;case 21531:var i=Ie.get();return Ae.ioctl(n,t,i);default:return-28}}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return-e.errno}},__syscall_openat:function(e,t,r,n){Ie.varargs=n;try{t=Ie.getStr(t),t=Ie.calculateAt(e,t);var i=n?Ie.get():0;return Ae.open(t,r,i).fd}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return-e.errno}},_embind_finalize_value_object:function(e){var t=ke[e];delete ke[e];var r=t.rawConstructor,n=t.rawDestructor,i=t.fields;$e([e],i.map((e=>e.getterReturnType)).concat(i.map((e=>e.setterArgumentType))),(e=>{var a={};return i.forEach(((t,r)=>{var n=t.fieldName,o=e[r],s=t.getter,l=t.getterContext,c=e[r+i.length],u=t.setter,d=t.setterContext;a[n]={read:e=>o.fromWireType(s(l,e)),write:(e,t)=>{var r=[];u(d,e,c.toWireType(r,t)),Fe(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in a)t[r]=a[r].read(e);return n(e),t},toWireType:function(e,t){for(var i in a)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var o=r();for(i in a)a[i].write(o,t[i]);return null!==e&&e.push(n,o),o},argPackAdvance:8,readValueFromPointer:De,destructorFunction:n}]}))},_embind_register_bigint:function(e,t,r,n,i){},_embind_register_bool:function(e,t,r,n,i){var a=We(r);Ye(e,{name:t=ze(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:i},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=F;else if(2===r)n=L;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=O}return this.fromWireType(n[e>>a])},destructorFunction:null})},_embind_register_class:function(e,t,r,n,i,a,o,s,l,c,u,d,f){u=ze(u),a=Lt(i,a),s&&(s=Lt(o,s)),c&&(c=Lt(l,c)),f=Lt(d,f);var h=Ge(u);_t(h,(function(){Rt("Cannot construct "+u+" due to unbound types",[n])})),$e([e,t,r],n?[n]:[],(function(t){var r,i;t=t[0],i=n?(r=t.registeredClass).instancePrototype:yt.prototype;var o=Be(h,(function(){if(Object.getPrototypeOf(this)!==l)throw new qe("Use 'new' to construct "+u);if(void 0===d.constructor_body)throw new qe(u+" has no accessible constructor");var e=d.constructor_body[arguments.length];if(void 0===e)throw new qe("Tried to invoke ctor of "+u+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(d.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),l=Object.create(i,{constructor:{value:o}});o.prototype=l;var d=new Et(u,o,l,f,r,a,s,c),m=new kt(u,d,!0,!1,!1),p=new kt(u+"*",d,!1,!1,!1),g=new kt(u+" const*",d,!1,!0,!1);return rt[e]={pointerType:p,constPointerType:g},Ft(h,o),[m,p,g]}))},_embind_register_class_class_function:function(e,t,r,n,i,a,o){var s=Vt(r,n);t=ze(t),a=Lt(i,a),$e([],[e],(function(e){var n=(e=e[0]).name+"."+t;function i(){Rt("Cannot call "+n+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var l=e.registeredClass.constructor;return void 0===l[t]?(i.argCount=r-1,l[t]=i):(wt(l,t,n),l[t].overloadTable[r-1]=i),$e([],s,(function(e){var i=[e[0],null].concat(e.slice(1)),s=Ut(n,i,null,a,o);return void 0===l[t].overloadTable?(s.argCount=r-1,l[t]=s):l[t].overloadTable[r-1]=s,[]})),[]}))},_embind_register_class_constructor:function(e,t,r,n,i,a){I(t>0);var o=Vt(t,r);i=Lt(n,i),$e([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new qe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{Rt("Cannot construct "+e.name+" due to unbound types",o)},$e([],o,(function(n){return n.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Ut(r,n,null,i,a),[]})),[]}))},_embind_register_class_function:function(e,t,r,n,i,a,o,s){var l=Vt(r,n);t=ze(t),a=Lt(i,a),$e([],[e],(function(e){var n=(e=e[0]).name+"."+t;function i(){Rt("Cannot call "+n+" due to unbound types",l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,u=c[t];return void 0===u||void 0===u.overloadTable&&u.className!==e.name&&u.argCount===r-2?(i.argCount=r-2,i.className=e.name,c[t]=i):(wt(c,t,n),c[t].overloadTable[r-2]=i),$e([],l,(function(i){var s=Ut(n,i,e,a,o);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))},_embind_register_class_property:function(e,t,r,n,i,a,o,s,l,c){t=ze(t),i=Lt(n,i),$e([],[e],(function(e){var n=(e=e[0]).name+"."+t,u={get:function(){Rt("Cannot access "+n+" due to unbound types",[r,o])},enumerable:!0,configurable:!0};return u.set=l?()=>{Rt("Cannot access "+n+" due to unbound types",[r,o])}:e=>{Je(n+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,u),$e([],l?[r,o]:[r],(function(r){var o=r[0],u={get:function(){var t=$t(this,e,n+" getter");return o.fromWireType(i(a,t))},enumerable:!0};if(l){l=Lt(s,l);var d=r[1];u.set=function(t){var r=$t(this,e,n+" setter"),i=[];l(c,r,d.toWireType(i,t)),Fe(i)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,u),[]})),[]}))},_embind_register_emval:function(e,t){Ye(e,{name:t=ze(t),fromWireType:function(e){var t=Yt.toValue(e);return zt(e),t},toWireType:function(e,t){return Yt.toHandle(t)},argPackAdvance:8,readValueFromPointer:De,destructorFunction:null})},_embind_register_enum:function(e,t,r,n){var i=We(r);function a(){}t=ze(t),a.values={},Ye(e,{name:t,constructor:a,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Xt(t,i,n),destructorFunction:null}),_t(t,a)},_embind_register_enum_value:function(e,t,r){var n=Kt(e,"enum");t=ze(t);var i=n.constructor,a=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Be(n.name+"_"+t,(function(){}))}});i.values[r]=a,i[t]=a},_embind_register_float:function(e,t,r){var n=We(r);Ye(e,{name:t=ze(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Qt(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Zt(t,n),destructorFunction:null})},_embind_register_function:function(e,t,r,n,i,a){var o=Vt(t,r);e=ze(e),i=Lt(n,i),_t(e,(function(){Rt("Cannot call "+e+" due to unbound types",o)}),t-1),$e([],o,(function(r){var n=[r[0],null].concat(r.slice(1));return Ft(e,Ut(e,n,null,i,a),t-1),[]}))},_embind_register_integer:function(e,t,r,n,i){t=ze(t),-1===i&&(i=4294967295);var a=We(r),o=e=>e;if(0===n){var s=32-8*r;o=e=>e<<s>>>s}var l=t.includes("unsigned"),c=(e,r)=>{if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+Qt(e)+'" to '+r);if(e<n||e>i)throw new TypeError('Passing a number "'+Qt(e)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+i+"]!")};Ye(e,{name:t,fromWireType:o,toWireType:l?function(e,t){return c(t,this.name),t>>>0}:function(e,t){return c(t,this.name),t},argPackAdvance:8,readValueFromPointer:er(t,a,0!==n),destructorFunction:null})},_embind_register_memory_view:function(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=R,r=t[e>>=2],i=t[e+1];return new n(k,i,r)}Ye(e,{name:r=ze(r),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},_embind_register_smart_ptr:function(e,t,r,n,i,a,o,s,l,c,u,d){r=ze(r),a=Lt(i,a),s=Lt(o,s),c=Lt(l,c),d=Lt(u,d),$e([e],[t],(function(e){return e=e[0],[new kt(r,e.registeredClass,!1,!1,!0,e,n,a,s,c,d)]}))},_embind_register_std_string:function(e,t){var r="std::string"===(t=ze(t));Ye(e,{name:t,fromWireType:function(e){var t,n=x(4*(e>>2),4,1),i=e+4;if(r)for(var a=i,o=0;o<=n;++o){var s=i+o;if(o==n||0==x(s,1,1)){var l=U(a,s-a);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),a=s+1}}else{var c=new Array(n);for(o=0;o<n;++o)c[o]=String.fromCharCode(x(i+o,1,1));t=c.join("")}return $r(e),t},toWireType:function(e,t){var n;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||Je("Cannot pass non-string to std::string"),n=r&&i?W(t):t.length;var a=Wr(4+n+1),o=a+4;if(C(4*(a>>2),n,4),r&&i)$(t,o,n+1);else if(i)for(var s=0;s<n;++s){var l=t.charCodeAt(s);l>255&&($r(o),Je("String has UTF-16 code units that do not fit in 8 bits")),C(o+s,l,1)}else for(s=0;s<n;++s)C(o+s,t[s],1);return null!==e&&e.push($r,a),a},argPackAdvance:8,readValueFromPointer:De,destructorFunction:function(e){$r(e)}})},_embind_register_std_wstring:function(e,t,r){var n,i,a,o,s;r=ze(r),2===t?(n=rr,i=nr,o=ir,a=()=>M,s=1):4===t&&(n=ar,i=or,o=sr,a=()=>R,s=2),Ye(e,{name:r,fromWireType:function(e){for(var r,i=x(4*(e>>2),4,1),o=a(),l=e+4,c=0;c<=i;++c){var u=e+4+c*t;if(c==i||0==o[u>>s]){var d=n(l,u-l);void 0===r?r=d:(r+=String.fromCharCode(0),r+=d),l=u+t}}return $r(e),r},toWireType:function(e,n){"string"!=typeof n&&Je("Cannot pass non-string to C++ string type "+r);var a=o(n),l=Wr(4+a+t);return C(4*(l>>2),a>>s,4),i(n,l+4,a+t),null!==e&&e.push($r,l),l},argPackAdvance:8,readValueFromPointer:De,destructorFunction:function(e){$r(e)}})},_embind_register_value_object:function(e,t,r,n,i,a){ke[e]={name:ze(t),rawConstructor:Lt(r,n),rawDestructor:Lt(i,a),fields:[]}},_embind_register_value_object_field:function(e,t,r,n,i,a,o,s,l,c){ke[e].fields.push({fieldName:ze(t),getterReturnType:r,getter:Lt(n,i),getterContext:a,setterArgumentType:o,setter:Lt(s,l),setterContext:c})},_embind_register_void:function(e,t){Ye(e,{isVoid:!0,name:t=ze(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},_emscripten_date_now:function(){return Date.now()},_emscripten_get_now_is_monotonic:function(){return!0},_emval_as:function(e,t,r){e=Yt.toValue(e),t=Kt(t,"emval::as");var n=[];return C(4*(r>>2),Yt.toHandle(n),4),t.toWireType(n,e)},_emval_await:function(e){return jt.handleAsync((()=>(e=Yt.toValue(e)).then(Yt.toHandle)))},_emval_call:function(e,t,r,n){e=Yt.toValue(e);for(var i=lr(t,r),a=new Array(t),o=0;o<t;++o){var s=i[o];a[o]=s.readValueFromPointer(n),n+=s.argPackAdvance}var l=e.apply(void 0,a);return Yt.toHandle(l)},_emval_call_method:function(e,t,r,n,i){return(e=dr[e])(t=Yt.toValue(t),r=ur(r),function(e){var t=[];return C(4*(e>>2),Yt.toHandle(t),4),t}(n),i)},_emval_call_void_method:function(e,t,r,n){(e=dr[e])(t=Yt.toValue(t),r=ur(r),null,n)},_emval_decref:zt,_emval_equals:function(e,t){return(e=Yt.toValue(e))==(t=Yt.toValue(t))},_emval_get_global:function(e){return 0===e?Yt.toHandle(fr()):(e=ur(e),Yt.toHandle(fr()[e]))},_emval_get_method_caller:function(e,t){var r=lr(e,t),n=r[0],i=n.name+"_$"+r.slice(1).map((function(e){return e.name})).join("_")+"$",a=mr[i];if(void 0!==a)return a;for(var o=["retType"],s=[n],l="",c=0;c<e-1;++c)l+=(0!==c?", ":"")+"arg"+c,o.push("argType"+c),s.push(r[1+c]);var u="return function "+Ge("methodCaller_"+i)+"(handle, name, destructors, args) {\n",d=0;for(c=0;c<e-1;++c)u+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(d?"+"+d:"")+");\n",d+=r[c+1].argPackAdvance;for(u+="    var rv = handle[name]("+l+");\n",c=0;c<e-1;++c)r[c+1].deleteObject&&(u+="    argType"+c+".deleteObject(arg"+c+");\n");n.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",o.push(u);var f,h,m=Nt(Function,o).apply(null,s);return f=m,h=dr.length,dr.push(f),a=h,mr[i]=a,a},_emval_get_module_property:function(e){return e=ur(e),Yt.toHandle(n[e])},_emval_get_property:function(e,t){return e=Yt.toValue(e),t=Yt.toValue(t),Yt.toHandle(e[t])},_emval_incref:function(e){e>4&&(Ht[e].refcount+=1)},_emval_instanceof:function(e,t){return(e=Yt.toValue(e))instanceof(t=Yt.toValue(t))},_emval_new:function(e,t,r,i){e=Yt.toValue(e);var a=pr[t];return a||(a=function(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var i="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(r=0;r<e;++r)i+="var argType"+r+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+r+"');\nvar arg"+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\nargTypes += 4;\n";return i+="var obj = new constructor("+t+");\nreturn valueToHandle(obj);\n}\n",new Function("requireRegisteredType","Module","valueToHandle","getMemory",i)(Kt,n,Yt.toHandle,(()=>R))}(t),pr[t]=a),a(e,r,i)},_emval_new_array:function(){return Yt.toHandle([])},_emval_new_cstring:function(e){return Yt.toHandle(ur(e))},_emval_new_object:function(){return Yt.toHandle({})},_emval_run_destructors:function(e){Fe(Yt.toValue(e)),zt(e)},_emval_set_property:function(e,t,r){e=Yt.toValue(e),t=Yt.toValue(t),r=Yt.toValue(r),e[t]=r},_emval_take_value:function(e,t){var r=(e=Kt(e,"_emval_take_value")).readValueFromPointer(t);return Yt.toHandle(r)},abort:function(){oe("native code called abort()")},alignfault:function(){oe("alignment fault")},emscripten_get_canvas_element_size:function(e,t,r){var n=wr(e);if(!n)return-4;C(4*(t>>2),n.width,4),C(4*(r>>2),n.height,4)},emscripten_get_now:hr,emscripten_glActiveTexture:function(e){Dr.activeTexture(e)},emscripten_glAttachShader:function(e,t){Dr.attachShader(_r.programs[e],_r.shaders[t])},emscripten_glBindAttribLocation:function(e,t,r){Dr.bindAttribLocation(_r.programs[e],t,U(r))},emscripten_glBindBuffer:function(e,t){35051==e?Dr.currentPixelPackBufferBinding=t:35052==e&&(Dr.currentPixelUnpackBufferBinding=t),Dr.bindBuffer(e,_r.buffers[t])},emscripten_glBindFramebuffer:function(e,t){Dr.bindFramebuffer(e,_r.framebuffers[t])},emscripten_glBindRenderbuffer:function(e,t){Dr.bindRenderbuffer(e,_r.renderbuffers[t])},emscripten_glBindTexture:function(e,t){Dr.bindTexture(e,_r.textures[t])},emscripten_glBindVertexArray:function(e){Dr.bindVertexArray(_r.vaos[e])},emscripten_glBindVertexArrayOES:function(e){Dr.bindVertexArray(_r.vaos[e])},emscripten_glBlendColor:function(e,t,r,n){Dr.blendColor(e,t,r,n)},emscripten_glBlendEquation:function(e){Dr.blendEquation(e)},emscripten_glBlendEquationSeparate:function(e,t){Dr.blendEquationSeparate(e,t)},emscripten_glBlendFunc:function(e,t){Dr.blendFunc(e,t)},emscripten_glBlitFramebuffer:function(e,t,r,n,i,a,o,s,l,c){Dr.blitFramebuffer(e,t,r,n,i,a,o,s,l,c)},emscripten_glBufferData:function(e,t,r,n){_r.currentContext.version>=2?r&&t?Dr.bufferData(e,D,n,r,t):Dr.bufferData(e,t,n):Dr.bufferData(e,r?D.subarray(r,r+t):t,n)},emscripten_glCheckFramebufferStatus:function(e){return Dr.checkFramebufferStatus(e)},emscripten_glClear:function(e){Dr.clear(e)},emscripten_glClearColor:function(e,t,r,n){Dr.clearColor(e,t,r,n)},emscripten_glClearStencil:function(e){Dr.clearStencil(e)},emscripten_glColorMask:function(e,t,r,n){Dr.colorMask(!!e,!!t,!!r,!!n)},emscripten_glCompileShader:function(e){Dr.compileShader(_r.shaders[e])},emscripten_glCopyTexSubImage2D:function(e,t,r,n,i,a,o,s){Dr.copyTexSubImage2D(e,t,r,n,i,a,o,s)},emscripten_glCreateProgram:function(){var e=_r.getNewId(_r.programs),t=Dr.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,_r.programs[e]=t,e},emscripten_glCreateShader:function(e){var t=_r.getNewId(_r.shaders);return _r.shaders[t]=Dr.createShader(e),t},emscripten_glDeleteBuffers:function(e,t){for(var r=0;r<e;r++){var n=x(4*(t+4*r>>2),4,0),i=_r.buffers[n];i&&(Dr.deleteBuffer(i),i.name=0,_r.buffers[n]=null,n==Dr.currentPixelPackBufferBinding&&(Dr.currentPixelPackBufferBinding=0),n==Dr.currentPixelUnpackBufferBinding&&(Dr.currentPixelUnpackBufferBinding=0))}},emscripten_glDeleteFramebuffers:function(e,t){for(var r=0;r<e;++r){var n=x(4*(t+4*r>>2),4,0),i=_r.framebuffers[n];i&&(Dr.deleteFramebuffer(i),i.name=0,_r.framebuffers[n]=null)}},emscripten_glDeleteProgram:function(e){if(e){var t=_r.programs[e];t?(Dr.deleteProgram(t),t.name=0,_r.programs[e]=null):_r.recordError(1281)}},emscripten_glDeleteRenderbuffers:function(e,t){for(var r=0;r<e;r++){var n=x(4*(t+4*r>>2),4,0),i=_r.renderbuffers[n];i&&(Dr.deleteRenderbuffer(i),i.name=0,_r.renderbuffers[n]=null)}},emscripten_glDeleteShader:function(e){if(e){var t=_r.shaders[e];t?(Dr.deleteShader(t),_r.shaders[e]=null):_r.recordError(1281)}},emscripten_glDeleteSync:function(e){if(e){var t=_r.syncs[e];t?(Dr.deleteSync(t),t.name=0,_r.syncs[e]=null):_r.recordError(1281)}},emscripten_glDeleteTextures:function(e,t){for(var r=0;r<e;r++){var n=x(4*(t+4*r>>2),4,0),i=_r.textures[n];i&&(Dr.deleteTexture(i),i.name=0,_r.textures[n]=null)}},emscripten_glDeleteVertexArrays:function(e,t){for(var r=0;r<e;r++){var n=x(4*(t+4*r>>2),4,0);Dr.deleteVertexArray(_r.vaos[n]),_r.vaos[n]=null}},emscripten_glDeleteVertexArraysOES:function(e,t){for(var r=0;r<e;r++){var n=x(4*(t+4*r>>2),4,0);Dr.deleteVertexArray(_r.vaos[n]),_r.vaos[n]=null}},emscripten_glDepthMask:function(e){Dr.depthMask(!!e)},emscripten_glDisable:function(e){Dr.disable(e)},emscripten_glDisableVertexAttribArray:function(e){Dr.disableVertexAttribArray(e)},emscripten_glDrawArrays:function(e,t,r){Dr.drawArrays(e,t,r)},emscripten_glDrawElements:function(e,t,r,n){Dr.drawElements(e,t,r,n)},emscripten_glEnable:function(e){Dr.enable(e)},emscripten_glEnableVertexAttribArray:function(e){Dr.enableVertexAttribArray(e)},emscripten_glFenceSync:function(e,t){var r=Dr.fenceSync(e,t);if(r){var n=_r.getNewId(_r.syncs);return r.name=n,_r.syncs[n]=r,n}return 0},emscripten_glFinish:function(){Dr.finish()},emscripten_glFlush:function(){Dr.flush()},emscripten_glFramebufferRenderbuffer:function(e,t,r,n){Dr.framebufferRenderbuffer(e,t,r,_r.renderbuffers[n])},emscripten_glFramebufferTexture2D:function(e,t,r,n,i){Dr.framebufferTexture2D(e,t,r,_r.textures[n],i)},emscripten_glGenBuffers:function(e,t){br(e,t,"createBuffer",_r.buffers)},emscripten_glGenFramebuffers:function(e,t){br(e,t,"createFramebuffer",_r.framebuffers)},emscripten_glGenRenderbuffers:function(e,t){br(e,t,"createRenderbuffer",_r.renderbuffers)},emscripten_glGenTextures:function(e,t){br(e,t,"createTexture",_r.textures)},emscripten_glGenVertexArrays:function(e,t){br(e,t,"createVertexArray",_r.vaos)},emscripten_glGenVertexArraysOES:function(e,t){br(e,t,"createVertexArray",_r.vaos)},emscripten_glGetAttribLocation:function(e,t){return Dr.getAttribLocation(_r.programs[e],U(t))},emscripten_glGetBufferParameteriv:function(e,t,r){r?C(4*(r>>2),Dr.getBufferParameter(e,t),4):_r.recordError(1281)},emscripten_glGetError:function(){var e=Dr.getError()||_r.lastError;return _r.lastError=0,e},emscripten_glGetFramebufferAttachmentParameteriv:function(e,t,r,n){var i=Dr.getFramebufferAttachmentParameter(e,t,r);(i instanceof WebGLRenderbuffer||i instanceof WebGLTexture)&&(i=0|i.name),C(4*(n>>2),i,4)},emscripten_glGetIntegerv:function(e,t){!function(e,t,r){if(t){var n=void 0;switch(e){case 36346:n=1;break;case 36344:return void(0!=r&&1!=r&&_r.recordError(1280));case 34814:case 36345:n=0;break;case 34466:var i=Dr.getParameter(34467);n=i?i.length:0;break;case 33309:if(_r.currentContext.version<2)return void _r.recordError(1282);n=2*(Dr.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(_r.currentContext.version<2)return void _r.recordError(1280);n=33307==e?3:0}if(void 0===n){var a=Dr.getParameter(e);switch(typeof a){case"number":n=a;break;case"boolean":n=a?1:0;break;case"string":return void _r.recordError(1280);case"object":if(null===a)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:n=0;break;default:return void _r.recordError(1280)}else{if(a instanceof Float32Array||a instanceof Uint32Array||a instanceof Int32Array||a instanceof Array){for(var o=0;o<a.length;++o)switch(r){case 0:C(4*(t+4*o>>2),a[o],4);break;case 2:T(4*(t+4*o>>2),a[o],4);break;case 4:C(t+o>>0,a[o]?1:0,1)}return}try{n=0|a.name}catch(t){return _r.recordError(1280),void g("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return _r.recordError(1280),void g("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+a+" of type "+typeof a+"!")}}switch(r){case 1:Er(t,n);break;case 0:C(4*(t>>2),n,4);break;case 2:T(4*(t>>2),n,4);break;case 4:C(t>>0,n?1:0,1)}}else _r.recordError(1281)}(e,t,0)},emscripten_glGetProgramInfoLog:function(e,t,r,n){var i=Dr.getProgramInfoLog(_r.programs[e]);null===i&&(i="(unknown error)");var a=t>0&&n?$(i,n,t):0;r&&C(4*(r>>2),a,4)},emscripten_glGetProgramiv:function(e,t,r){if(r)if(e>=_r.counter)_r.recordError(1281);else if(e=_r.programs[e],35716==t){var n=Dr.getProgramInfoLog(e);null===n&&(n="(unknown error)"),C(4*(r>>2),n.length+1,4)}else if(35719==t){if(!e.maxUniformLength)for(var i=0;i<Dr.getProgramParameter(e,35718);++i)e.maxUniformLength=Math.max(e.maxUniformLength,Dr.getActiveUniform(e,i).name.length+1);C(4*(r>>2),e.maxUniformLength,4)}else if(35722==t){if(!e.maxAttributeLength)for(i=0;i<Dr.getProgramParameter(e,35721);++i)e.maxAttributeLength=Math.max(e.maxAttributeLength,Dr.getActiveAttrib(e,i).name.length+1);C(4*(r>>2),e.maxAttributeLength,4)}else if(35381==t){if(!e.maxUniformBlockNameLength)for(i=0;i<Dr.getProgramParameter(e,35382);++i)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,Dr.getActiveUniformBlockName(e,i).length+1);C(4*(r>>2),e.maxUniformBlockNameLength,4)}else C(4*(r>>2),Dr.getProgramParameter(e,t),4);else _r.recordError(1281)},emscripten_glGetRenderbufferParameteriv:function(e,t,r){r?C(4*(r>>2),Dr.getRenderbufferParameter(e,t),4):_r.recordError(1281)},emscripten_glGetShaderInfoLog:function(e,t,r,n){var i=Dr.getShaderInfoLog(_r.shaders[e]);null===i&&(i="(unknown error)");var a=t>0&&n?$(i,n,t):0;r&&C(4*(r>>2),a,4)},emscripten_glGetShaderPrecisionFormat:function(e,t,r,n){var i=Dr.getShaderPrecisionFormat(e,t);C(4*(r>>2),i.rangeMin,4),C(4*(r+4>>2),i.rangeMax,4),C(4*(n>>2),i.precision,4)},emscripten_glGetShaderiv:function(e,t,r){if(r)if(35716==t){var n=Dr.getShaderInfoLog(_r.shaders[e]);null===n&&(n="(unknown error)"),C(4*(r>>2),n?n.length+1:0,4)}else if(35720==t){var i=Dr.getShaderSource(_r.shaders[e]);C(4*(r>>2),i?i.length+1:0,4)}else C(4*(r>>2),Dr.getShaderParameter(_r.shaders[e],t),4);else _r.recordError(1281)},emscripten_glGetString:function(e){var t=_r.stringCache[e];if(!t){switch(e){case 7939:var r=Dr.getSupportedExtensions()||[];t=Cr((r=r.concat(r.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var n=Dr.getParameter(e);n||_r.recordError(1280),t=n&&Cr(n);break;case 7938:var i=Dr.getParameter(7938);t=Cr(i=_r.currentContext.version>=2?"OpenGL ES 3.0 ("+i+")":"OpenGL ES 2.0 ("+i+")");break;case 35724:var a=Dr.getParameter(35724),o=a.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==o&&(3==o[1].length&&(o[1]=o[1]+"0"),a="OpenGL ES GLSL ES "+o[1]+" ("+a+")"),t=Cr(a);break;default:_r.recordError(1280)}_r.stringCache[e]=t}return t},emscripten_glGetStringi:function(e,t){if(_r.currentContext.version<2)return _r.recordError(1282),0;var r=_r.stringiCache[e];if(r)return t<0||t>=r.length?(_r.recordError(1281),0):r[t];if(7939===e){var n=Dr.getSupportedExtensions()||[];return n=(n=n.concat(n.map((function(e){return"GL_"+e})))).map((function(e){return Cr(e)})),r=_r.stringiCache[e]=n,t<0||t>=r.length?(_r.recordError(1281),0):r[t]}return _r.recordError(1280),0},emscripten_glGetUniformLocation:function(e,t){if(t=U(t),e=_r.programs[e]){!function(e){var t,r,n=e.uniformLocsById,i=e.uniformSizeAndIdsByName;if(!n)for(e.uniformLocsById=n={},e.uniformArrayNamesById={},t=0;t<Dr.getProgramParameter(e,35718);++t){var a=Dr.getActiveUniform(e,t),o=a.name,s=a.size,l=Tr(o),c=l>0?o.slice(0,l):o,u=e.uniformIdCounter;for(e.uniformIdCounter+=s,i[c]=[s,u],r=0;r<s;++r)n[u]=r,e.uniformArrayNamesById[u++]=c}}(e);var r=e.uniformLocsById,n=0,i=t,a=Tr(t);a>0&&(s=t.slice(a+1),n=parseInt(s)>>>0,i=t.slice(0,a));var o=e.uniformSizeAndIdsByName[i];if(o&&n<o[0]&&(r[n+=o[1]]=r[n]||Dr.getUniformLocation(e,t)))return n}else _r.recordError(1281);var s;return-1},emscripten_glIsEnabled:function(e){return Dr.isEnabled(e)},emscripten_glIsTexture:function(e){var t=_r.textures[e];return t?Dr.isTexture(t):0},emscripten_glLineWidth:function(e){Dr.lineWidth(e)},emscripten_glLinkProgram:function(e){e=_r.programs[e],Dr.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},emscripten_glPixelStorei:function(e,t){3317==e&&(_r.unpackAlignment=t),Dr.pixelStorei(e,t)},emscripten_glReadPixels:function(e,t,r,n,i,a,o){if(_r.currentContext.version>=2)if(Dr.currentPixelPackBufferBinding)Dr.readPixels(e,t,r,n,i,a,o);else{var s=xr(a);Dr.readPixels(e,t,r,n,i,a,s,o>>Pr(s))}else{var l=Sr(a,i,r,n,o);l?Dr.readPixels(e,t,r,n,i,a,l):_r.recordError(1280)}},emscripten_glRenderbufferStorage:function(e,t,r,n){Dr.renderbufferStorage(e,t,r,n)},emscripten_glRenderbufferStorageMultisample:function(e,t,r,n,i){Dr.renderbufferStorageMultisample(e,t,r,n,i)},emscripten_glScissor:function(e,t,r,n){Dr.scissor(e,t,r,n)},emscripten_glShaderSource:function(e,t,r,n){var i=_r.getSource(e,t,r,n);Dr.shaderSource(_r.shaders[e],i)},emscripten_glTexImage2D:function(e,t,r,n,i,a,o,s,l){if(_r.currentContext.version>=2)if(Dr.currentPixelUnpackBufferBinding)Dr.texImage2D(e,t,r,n,i,a,o,s,l);else if(l){var c=xr(s);Dr.texImage2D(e,t,r,n,i,a,o,s,c,l>>Pr(c))}else Dr.texImage2D(e,t,r,n,i,a,o,s,null);else Dr.texImage2D(e,t,r,n,i,a,o,s,l?Sr(s,o,n,i,l):null)},emscripten_glTexParameterf:function(e,t,r){Dr.texParameterf(e,t,r)},emscripten_glTexParameterfv:function(e,t,r){var n=P(4*(r>>2),4,0);Dr.texParameterf(e,t,n)},emscripten_glTexParameteri:function(e,t,r){Dr.texParameteri(e,t,r)},emscripten_glTexParameteriv:function(e,t,r){var n=x(4*(r>>2),4,0);Dr.texParameteri(e,t,n)},emscripten_glTexSubImage2D:function(e,t,r,n,i,a,o,s,l){if(_r.currentContext.version>=2)if(Dr.currentPixelUnpackBufferBinding)Dr.texSubImage2D(e,t,r,n,i,a,o,s,l);else if(l){var c=xr(s);Dr.texSubImage2D(e,t,r,n,i,a,o,s,c,l>>Pr(c))}else Dr.texSubImage2D(e,t,r,n,i,a,o,s,null);else{var u=null;l&&(u=Sr(s,o,i,a,l)),Dr.texSubImage2D(e,t,r,n,i,a,o,s,u)}},emscripten_glUniform1f:function(e,t){Dr.uniform1f(Ar(e),t)},emscripten_glUniform1fv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform1fv(Ar(e),N,r>>2,t);else{if(t<=288)for(var n=Ir[t-1],i=0;i<t;++i)n[i]=P(4*(r+4*i>>2),4,0);else n=N.subarray(r>>2,r+4*t>>2);Dr.uniform1fv(Ar(e),n)}},emscripten_glUniform1i:function(e,t){Dr.uniform1i(Ar(e),t)},emscripten_glUniform1iv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform1iv(Ar(e),O,r>>2,t);else{if(t<=288)for(var n=kr[t-1],i=0;i<t;++i)n[i]=x(4*(r+4*i>>2),4,0);else n=O.subarray(r>>2,r+4*t>>2);Dr.uniform1iv(Ar(e),n)}},emscripten_glUniform2f:function(e,t,r){Dr.uniform2f(Ar(e),t,r)},emscripten_glUniform2fv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform2fv(Ar(e),N,r>>2,2*t);else{if(t<=144)for(var n=Ir[2*t-1],i=0;i<2*t;i+=2)n[i]=P(4*(r+4*i>>2),4,0),n[i+1]=P(4*(r+(4*i+4)>>2),4,0);else n=N.subarray(r>>2,r+8*t>>2);Dr.uniform2fv(Ar(e),n)}},emscripten_glUniform2i:function(e,t,r){Dr.uniform2i(Ar(e),t,r)},emscripten_glUniform2iv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform2iv(Ar(e),O,r>>2,2*t);else{if(t<=144)for(var n=kr[2*t-1],i=0;i<2*t;i+=2)n[i]=x(4*(r+4*i>>2),4,0),n[i+1]=x(4*(r+(4*i+4)>>2),4,0);else n=O.subarray(r>>2,r+8*t>>2);Dr.uniform2iv(Ar(e),n)}},emscripten_glUniform3f:function(e,t,r,n){Dr.uniform3f(Ar(e),t,r,n)},emscripten_glUniform3fv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform3fv(Ar(e),N,r>>2,3*t);else{if(t<=96)for(var n=Ir[3*t-1],i=0;i<3*t;i+=3)n[i]=P(4*(r+4*i>>2),4,0),n[i+1]=P(4*(r+(4*i+4)>>2),4,0),n[i+2]=P(4*(r+(4*i+8)>>2),4,0);else n=N.subarray(r>>2,r+12*t>>2);Dr.uniform3fv(Ar(e),n)}},emscripten_glUniform3i:function(e,t,r,n){Dr.uniform3i(Ar(e),t,r,n)},emscripten_glUniform3iv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform3iv(Ar(e),O,r>>2,3*t);else{if(t<=96)for(var n=kr[3*t-1],i=0;i<3*t;i+=3)n[i]=x(4*(r+4*i>>2),4,0),n[i+1]=x(4*(r+(4*i+4)>>2),4,0),n[i+2]=x(4*(r+(4*i+8)>>2),4,0);else n=O.subarray(r>>2,r+12*t>>2);Dr.uniform3iv(Ar(e),n)}},emscripten_glUniform4f:function(e,t,r,n,i){Dr.uniform4f(Ar(e),t,r,n,i)},emscripten_glUniform4fv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform4fv(Ar(e),N,r>>2,4*t);else{if(t<=72){var n=Ir[4*t-1],i=N;r>>=2;for(var a=0;a<4*t;a+=4){var o=r+a;n[a]=i[o],n[a+1]=i[o+1],n[a+2]=i[o+2],n[a+3]=i[o+3]}}else n=N.subarray(r>>2,r+16*t>>2);Dr.uniform4fv(Ar(e),n)}},emscripten_glUniform4i:function(e,t,r,n,i){Dr.uniform4i(Ar(e),t,r,n,i)},emscripten_glUniform4iv:function(e,t,r){if(_r.currentContext.version>=2)t&&Dr.uniform4iv(Ar(e),O,r>>2,4*t);else{if(t<=72)for(var n=kr[4*t-1],i=0;i<4*t;i+=4)n[i]=x(4*(r+4*i>>2),4,0),n[i+1]=x(4*(r+(4*i+4)>>2),4,0),n[i+2]=x(4*(r+(4*i+8)>>2),4,0),n[i+3]=x(4*(r+(4*i+12)>>2),4,0);else n=O.subarray(r>>2,r+16*t>>2);Dr.uniform4iv(Ar(e),n)}},emscripten_glUniformMatrix2fv:function(e,t,r,n){if(_r.currentContext.version>=2)t&&Dr.uniformMatrix2fv(Ar(e),!!r,N,n>>2,4*t);else{if(t<=72)for(var i=Ir[4*t-1],a=0;a<4*t;a+=4)i[a]=P(4*(n+4*a>>2),4,0),i[a+1]=P(4*(n+(4*a+4)>>2),4,0),i[a+2]=P(4*(n+(4*a+8)>>2),4,0),i[a+3]=P(4*(n+(4*a+12)>>2),4,0);else i=N.subarray(n>>2,n+16*t>>2);Dr.uniformMatrix2fv(Ar(e),!!r,i)}},emscripten_glUniformMatrix3fv:function(e,t,r,n){if(_r.currentContext.version>=2)t&&Dr.uniformMatrix3fv(Ar(e),!!r,N,n>>2,9*t);else{if(t<=32)for(var i=Ir[9*t-1],a=0;a<9*t;a+=9)i[a]=P(4*(n+4*a>>2),4,0),i[a+1]=P(4*(n+(4*a+4)>>2),4,0),i[a+2]=P(4*(n+(4*a+8)>>2),4,0),i[a+3]=P(4*(n+(4*a+12)>>2),4,0),i[a+4]=P(4*(n+(4*a+16)>>2),4,0),i[a+5]=P(4*(n+(4*a+20)>>2),4,0),i[a+6]=P(4*(n+(4*a+24)>>2),4,0),i[a+7]=P(4*(n+(4*a+28)>>2),4,0),i[a+8]=P(4*(n+(4*a+32)>>2),4,0);else i=N.subarray(n>>2,n+36*t>>2);Dr.uniformMatrix3fv(Ar(e),!!r,i)}},emscripten_glUniformMatrix4fv:function(e,t,r,n){if(_r.currentContext.version>=2)t&&Dr.uniformMatrix4fv(Ar(e),!!r,N,n>>2,16*t);else{if(t<=18){var i=Ir[16*t-1],a=N;n>>=2;for(var o=0;o<16*t;o+=16){var s=n+o;i[o]=a[s],i[o+1]=a[s+1],i[o+2]=a[s+2],i[o+3]=a[s+3],i[o+4]=a[s+4],i[o+5]=a[s+5],i[o+6]=a[s+6],i[o+7]=a[s+7],i[o+8]=a[s+8],i[o+9]=a[s+9],i[o+10]=a[s+10],i[o+11]=a[s+11],i[o+12]=a[s+12],i[o+13]=a[s+13],i[o+14]=a[s+14],i[o+15]=a[s+15]}}else i=N.subarray(n>>2,n+64*t>>2);Dr.uniformMatrix4fv(Ar(e),!!r,i)}},emscripten_glUseProgram:function(e){e=_r.programs[e],Dr.useProgram(e),Dr.currentProgram=e},emscripten_glVertexAttrib1f:function(e,t){Dr.vertexAttrib1f(e,t)},emscripten_glVertexAttrib2fv:function(e,t){Dr.vertexAttrib2f(e,P(4*(t>>2),4,0),P(4*(t+4>>2),4,0))},emscripten_glVertexAttrib3fv:function(e,t){Dr.vertexAttrib3f(e,P(4*(t>>2),4,0),P(4*(t+4>>2),4,0),P(4*(t+8>>2),4,0))},emscripten_glVertexAttrib4fv:function(e,t){Dr.vertexAttrib4f(e,P(4*(t>>2),4,0),P(4*(t+4>>2),4,0),P(4*(t+8>>2),4,0),P(4*(t+12>>2),4,0))},emscripten_glVertexAttribPointer:function(e,t,r,n,i,a){Dr.vertexAttribPointer(e,t,r,!!n,i,a)},emscripten_glViewport:function(e,t,r,n){Dr.viewport(e,t,r,n)},emscripten_glWaitSync:function(e,t,r,n){var i,a;Dr.waitSync(_r.syncs[e],t,(i=r,I((a=n)===(0|a)),(i>>>0)+4294967296*a))},emscripten_memcpy_big:function(e,t,r){D.copyWithin(e,t,t+r)},emscripten_resize_heap:function(e){var t=D.length;I((e>>>=0)>t);var r,n,i=2147483648;if(e>i)return g("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+i+" bytes!"),!1;for(var a=1;a<=4;a*=2){var o=t*(1+.2/a);o=Math.min(o,e+100663296);var s=Math.min(i,(r=Math.max(e,o))+((n=65536)-r%n)%n);if(Fr(s))return!0}return g("Failed to grow the heap from "+t+" bytes to "+s+" bytes, not enough memory!"),!1},emscripten_webgl_create_context:Mr,emscripten_webgl_destroy_context:function(e){_r.currentContext==e&&(_r.currentContext=0),_r.deleteContext(e)},emscripten_webgl_get_current_context:Or,emscripten_webgl_init_context_attributes:function(e){I(e);for(var t=e>>2,r=0;r<14;++r)C(4*(t+r),0,4);C(4*(t+0),C(4*(t+1),C(4*(t+3),C(4*(t+4),C(4*(t+8),C(4*(t+10),1,4),4),4),4),4),4)},emscripten_webgl_make_context_current:function(e){return _r.makeContextCurrent(e)?0:-5},fd_close:function(e){try{var t=Ie.getStreamFromFD(e);return Ae.close(t),0}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return e.errno}},fd_read:function(e,t,r,n){try{var i=function(e,t,r,n){for(var i=0,a=0;a<r;a++){var o=x(4*(t>>2),4,1),s=x(4*(t+4>>2),4,1);t+=8;var l=Ae.read(e,F,o,s,n);if(l<0)return-1;if(i+=l,l<s)break}return i}(Ie.getStreamFromFD(e),t,r);return C(4*(n>>2),i,4),0}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return e.errno}},fd_seek:function(e,t,r,n,i){try{var a=(l=r,I((s=t)==s>>>0||s==(0|s)),I(l===(0|l)),l+2097152>>>0<4194305-!!s?(s>>>0)+4294967296*l:NaN);if(isNaN(a))return 61;var o=Ie.getStreamFromFD(e);return Ae.llseek(o,a,n),C(4*(i>>2),(ue=[o.position>>>0,(ce=o.position,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)])[0],4),C(4*(i+4>>2),ue[1],4),o.getdents&&0===a&&0===n&&(o.getdents=null),0}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return e.errno}var s,l},fd_write:function(e,t,r,n){try{var i=function(e,t,r,n){for(var i=0,a=0;a<r;a++){var o=x(4*(t>>2),4,1),s=x(4*(t+4>>2),4,1);t+=8;var l=Ae.write(e,F,o,s,n);if(l<0)return-1;i+=l}return i}(Ie.getStreamFromFD(e),t,r);return C(4*(n>>2),i,4),0}catch(e){if(void 0===Ae||!(e instanceof Ae.ErrnoError))throw e;return e.errno}},segfault:function(){oe("segmentation fault")}};jt.instrumentWasmImports(Vr),function(){var e={env:Vr,wasi_snapshot_preview1:Vr};function t(e,t){var r,i=e.exports;i=jt.instrumentWasmExports(i),n.asm=i,I(y=n.asm.memory,"memory not found in wasm exports"),H(y.buffer),I(n.asm.__indirect_function_table,"table not found in wasm exports"),r=n.asm.__wasm_call_ctors,X.unshift(r),ae("wasm-instantiate")}ie("wasm-instantiate");var i=n;function a(e){I(n===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,t(e.instance)}function l(t){return(v||!o&&!s||"function"!=typeof fetch?Promise.resolve().then((function(){return me(se)})):fetch(se,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+se+"'";return e.arrayBuffer()})).catch((function(){return me(se)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){g("failed to asynchronously prepare wasm: "+e),se.startsWith("file://")&&g("warning: Loading from a file URI ("+se+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),oe(e)}))}if(n.instantiateWasm)try{var c=n.instantiateWasm(e,t);return c=jt.instrumentWasmExports(c)}catch(e){return g("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||fe(se)||"function"!=typeof fetch?l(a):fetch(se,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(a,(function(e){return g("wasm streaming compile failed: "+e),g("falling back to ArrayBuffer instantiation"),l(a)}))}))).catch(r)}(),n.___wasm_call_ctors=he("__wasm_call_ctors");var $r=n._free=he("free"),Wr=n._malloc=he("malloc"),Hr=n.___getTypeName=he("__getTypeName");n.__embind_initialize_bindings=he("_embind_initialize_bindings");var zr=n.___errno_location=he("__errno_location"),qr=n._fflush=he("fflush"),Jr=n._sbrk=he("sbrk");n._emscripten_get_sbrk_ptr=he("emscripten_get_sbrk_ptr");var Yr=n._emscripten_stack_init=function(){return(Yr=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)};n._emscripten_stack_set_limits=function(){return(n._emscripten_stack_set_limits=n.asm.emscripten_stack_set_limits).apply(null,arguments)},n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)};var Xr=n._emscripten_stack_get_base=function(){return(Xr=n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},Kr=n._emscripten_stack_get_end=function(){return(Kr=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)};n.stackSave=he("stackSave"),n.stackRestore=he("stackRestore"),n.stackAlloc=he("stackAlloc");var Qr=n.___cxa_is_pointer_type=he("__cxa_is_pointer_type");n.dynCall_ii=he("dynCall_ii"),n.dynCall_vi=he("dynCall_vi"),n.dynCall_ji=he("dynCall_ji"),n.dynCall_iii=he("dynCall_iii"),n.dynCall_iij=he("dynCall_iij"),n.dynCall_viiij=he("dynCall_viiij"),n.dynCall_viii=he("dynCall_viii"),n.dynCall_vii=he("dynCall_vii"),n.dynCall_v=he("dynCall_v"),n.dynCall_viij=he("dynCall_viij"),n.dynCall_fij=he("dynCall_fij"),n.dynCall_viiii=he("dynCall_viiii"),n.dynCall_fii=he("dynCall_fii"),n.dynCall_fif=he("dynCall_fif"),n.dynCall_iiiff=he("dynCall_iiiff"),n.dynCall_vijiii=he("dynCall_vijiii"),n.dynCall_viiiii=he("dynCall_viiiii"),n.dynCall_iiiiii=he("dynCall_iiiiii"),n.dynCall_iiii=he("dynCall_iiii"),n.dynCall_vij=he("dynCall_vij"),n.dynCall_iiiiiii=he("dynCall_iiiiiii"),n.dynCall_viiff=he("dynCall_viiff"),n.dynCall_iiij=he("dynCall_iiij"),n.dynCall_iiiii=he("dynCall_iiiii"),n.dynCall_viif=he("dynCall_viif"),n.dynCall_viiffff=he("dynCall_viiffff"),n.dynCall_iiifii=he("dynCall_iiifii"),n.dynCall_iiiffii=he("dynCall_iiiffii"),n.dynCall_iiiij=he("dynCall_iiiij"),n.dynCall_viiiiii=he("dynCall_viiiiii"),n.dynCall_iiiiiiii=he("dynCall_iiiiiiii"),n.dynCall_jii=he("dynCall_jii"),n.dynCall_jij=he("dynCall_jij"),n.dynCall_fi=he("dynCall_fi"),n.dynCall_jijf=he("dynCall_jijf"),n.dynCall_i=he("dynCall_i"),n.dynCall_vif=he("dynCall_vif"),n.dynCall_di=he("dynCall_di"),n.dynCall_vid=he("dynCall_vid"),n.dynCall_iiiifii=he("dynCall_iiiifii"),n.dynCall_iiiffi=he("dynCall_iiiffi"),n.dynCall_vifffffffff=he("dynCall_vifffffffff"),n.dynCall_iifffffffff=he("dynCall_iifffffffff"),n.dynCall_iiff=he("dynCall_iiff"),n.dynCall_iif=he("dynCall_iif"),n.dynCall_viff=he("dynCall_viff"),n.dynCall_viffffff=he("dynCall_viffffff"),n.dynCall_dii=he("dynCall_dii"),n.dynCall_viid=he("dynCall_viid"),n.dynCall_iiiiffi=he("dynCall_iiiiffi"),n.dynCall_fiii=he("dynCall_fiii"),n.dynCall_viiif=he("dynCall_viiif"),n.dynCall_viifffffffff=he("dynCall_viifffffffff"),n.dynCall_viiffffff=he("dynCall_viiffffff"),n.dynCall_viifff=he("dynCall_viifff"),n.dynCall_viiifii=he("dynCall_viiifii"),n.dynCall_viiiiiii=he("dynCall_viiiiiii"),n.dynCall_viffff=he("dynCall_viffff"),n.dynCall_vifff=he("dynCall_vifff"),n.dynCall_iiffi=he("dynCall_iiffi"),n.dynCall_iifii=he("dynCall_iifii"),n.dynCall_iiifi=he("dynCall_iiifi"),n.dynCall_iiiiij=he("dynCall_iiiiij"),n.dynCall_iijj=he("dynCall_iijj"),n.dynCall_vffff=he("dynCall_vffff"),n.dynCall_viiiiiiii=he("dynCall_viiiiiiii"),n.dynCall_vf=he("dynCall_vf"),n.dynCall_viiiiiiiii=he("dynCall_viiiiiiiii"),n.dynCall_viiiiiiiiii=he("dynCall_viiiiiiiiii"),n.dynCall_fiifiii=he("dynCall_fiifiii"),n.dynCall_iiifiii=he("dynCall_iiifiii"),n.dynCall_viiifiii=he("dynCall_viiifiii"),n.dynCall_vifii=he("dynCall_vifii"),n.dynCall_viifd=he("dynCall_viifd"),n.dynCall_viddi=he("dynCall_viddi"),n.dynCall_viiiiiffii=he("dynCall_viiiiiffii"),n.dynCall_jiiii=he("dynCall_jiiii"),n.dynCall_jiji=he("dynCall_jiji"),n.dynCall_iidiiii=he("dynCall_iidiiii");var Zr,en=n._asyncify_start_unwind=he("asyncify_start_unwind"),tn=n._asyncify_stop_unwind=he("asyncify_stop_unwind"),rn=n._asyncify_start_rewind=he("asyncify_start_rewind"),nn=n._asyncify_stop_rewind=he("asyncify_stop_rewind");function an(){var e;Yr(),I(0==(3&(e=Kr()))),C(4*(e>>2),34821223,4),C(4*(e+4>>2),2310721022,4)}function on(e){function r(){Zr||(Zr=!0,n.calledRun=!0,A||(I(!Q),Q=!0,J(),n.noFSInit||Ae.init.initialized||Ae.init(),Ae.ignorePermissions=!1,ge(X),t(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),I(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(J(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),K.unshift(e);var e;ge(K)}()))}Z>0||(an(),function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),Y.unshift(e);var e;ge(Y)}(),Z>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),r()}),1)):r(),J()))}if(n.GL=_r,n.Asyncify=jt,["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","print","printErr","callMain","abort","keepRuntimeAlive","wasmMemory","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readAsmConstArgsArray","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","ExitStatus","getEnvStrings","checkWasiClock","doReadv","doWritev","dlopenMissingError","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","FS","MEMFS","TTY","PIPEFS","SOCKFS","_setNetworkCallback","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","Fibers","emscriptenWebGLGetIndexed","ALLOC_NORMAL","ALLOC_STACK","allocate","InternalError","BindingError","UnboundTypeError","PureVirtualError","init_embind","throwInternalError","throwBindingError","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","registeredTypes","awaitingDependencies","typeDependencies","registeredPointers","registerType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","heap32VectorToArray","requireRegisteredType","getShiftFromSize","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","runDestructors","new_","craftInvokerFunction","embind__requireFunction","tupleRegistrations","structRegistrations","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","deletionQueue","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","delayFunction","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_handle_array","emval_free_list","emval_symbols","init_emval","count_emval_handles","get_first_emval","getStringOrSymbol","Emval","emval_newers","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_methodCallers","emval_addMethodCaller","emval_registeredMethods"].forEach((function(e){Object.getOwnPropertyDescriptor(n,e)||Object.defineProperty(n,e,{configurable:!0,get:function(){var t="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";b(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),oe(t)}})})),["ptrToString","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","traverseStack","convertPCtoSourceLocation","readAsmConstArgs","mainThreadEM_ASM","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","maybeExit","safeSetTimeout","asmjsMangle","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","convertU32PairToI53","reallyNegative","strLen","reSign","formatString","getSocketFromFD","getSocketAddress","registerKeyEventCallback","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","getEnvStrings","checkWasiClock","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","exception_addRef","exception_decRef","setMainLoop","_setNetworkCallback","emscriptenWebGLGetUniform","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","emscriptenWebGLGetIndexed","registerInheritedInstance","unregisterInheritedInstance"].forEach((function(e){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get:function(){var t="`"+e+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";b(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ye(t)}})})),te=function e(){Zr||on(),Zr||(te=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return on(),e.ready});class Ct{constructor(){this.executing=!1,this.queue=[]}exec(e,t,...r){return new Promise(((n,i)=>{this.queue.push({fn:async()=>{if(e)try{const i=await e.call(t,...r);n(i)}catch(e){i(e)}else i(new Error("Function is null!"))}}),this.executing||this.execNextTask()}))}execNextTask(){if(this.queue.length<1)return void(this.executing=!1);this.executing=!0;this.queue.shift().fn().then((()=>{this.execNextTask()}))}}const Tt=[],xt=[],Pt=[],St=[],At=(e={})=>Et(e).then((e=>(_t(e),e.webAssemblyQueue=new Ct,e.globalCanvas=new e.GlobalCanvas,e.PAGFont.registerFallbackFontNames(),e))).catch((e=>{throw console.error(e),new Error("PAGInit fail! Please check .wasm file path valid.")}));ne&&(e=>{onmessage=async t=>{const r={[Ve.PAGInit]:t=>{const r={};t.data.args[0]&&(r.locateFile=()=>t.data.args[0].fileUrl),e(r).then((e=>{self.PAG=e,self.postMessage({name:t.data.name,args:[]})}))},[Ve.PAGFile_load]:async e=>{const t=(r=await self.PAG.PAGFile.load(e.data.args[0]),Tt.push(r),Tt.length-1);var r;self.postMessage({name:e.data.name,args:[t]})},[Ve.PAGView_init]:async e=>{const[t,r,n]=e.data.args,i=(a=await self.PAG.PAGView.init(Tt[t],r,n),xt.push(a),xt.length-1);var a;self.postMessage({name:e.data.name,args:[i]})},[Ve.PAGView_destroy]:async e=>{const[t]=e.data.args;xt[t].destroy(),(e=>{xt[e]=null})(t),self.postMessage({name:e.data.name,args:[]})},[Ve.PAGFile_getTextData]:async e=>{const[t,r]=e.data.args,n=Tt[t].getTextData(r);let i={};for(const e in n)"function"!=typeof n[e]&&(i[e]=n[e]);i.key=(e=>(St.push(e),St.length-1))(n),self.postMessage({name:e.data.name,args:[i]})},[Ve.PAGFile_replaceText]:async e=>{const[t,r,n]=e.data.args,i=St[n.key];for(const e in n)"key"!==e&&(i[e]=n[e]);Tt[t].replaceText(r,i),self.postMessage({name:e.data.name,args:[]})},[Ve.PAGFile_replaceImage]:async e=>{const[t,r,n]=e.data.args,i=Pt[n];Tt[t].replaceImage(r,i),self.postMessage({name:e.data.name,args:[]})},[Ve.PAGFile_destroy]:async e=>{const[t]=e.data.args;Tt[t].destroy(),(e=>{Tt[e]=null})(t),self.postMessage({name:e.data.name,args:[]})},[Ve.PAGImage_fromSource]:async e=>{const[t]=e.data.args,r=(n=self.PAG.PAGImage.fromSource(t),Pt.push(n),Pt.length-1);var n;self.postMessage({name:e.data.name,args:[r]})},[Ve.PAGImage_destroy]:async e=>{const[t]=e.data.args;Pt[t].destroy(),(e=>{Pt[e]=null})(t),self.postMessage({name:e.data.name,args:[]})},[Ve.TextDocument_delete]:async e=>{const[t]=e.data.args;St[t].delete(),(e=>{St[e]=null})(t),self.postMessage({name:e.data.name,args:[]})}},n=t.data.name.split("_")[0];if(r[n])return void r[n](t);const[i,a]=n.split("."),o=t.data.args[0];if("PAGFile"!==i)if("PAGView"!==i);else{const e=xt[o];if(!e)throw new Error("pagView doesn't exist");const r=e[a];if(!r)throw new Error(`PAGView.${a} doesn't exist`);const n=await r.call(e,...t.data.args.slice(1));self.postMessage({name:t.data.name,args:[n]})}else{const e=Tt[o];if(!e)throw new Error("pagFile doesn't exist");const r=e[a];if(!r)throw new Error(`PAGFile.${a} doesn't exist`);const n=await r.call(e,...t.data.args.slice(1));self.postMessage({name:t.data.name,args:[n]})}}})(At),e.PAGInit=At,e.types=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=libpag.min.js.map
